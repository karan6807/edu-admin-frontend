{"ast":null,"code":"import React,{useState}from\"react\";import'bootstrap/dist/css/bootstrap.min.css';import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AdminLogin(){const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[message,setMessage]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();// Create axios instance with base URL\nconst api=axios.create({baseURL:'http://localhost:5000/api',timeout:10000,// 10 second timeout\nheaders:{'Content-Type':'application/json'}});const handleLogin=async e=>{e.preventDefault();setMessage(\"\");setIsLoading(true);try{const res=await api.post(\"/admin/login\",{email:email.trim(),password});const{token,user}=res.data;// Store token and user info\nlocalStorage.setItem(\"adminToken\",token);if(user){localStorage.setItem(\"adminUser\",JSON.stringify(user));}setMessage(\"Login successful!\");console.log(\"Admin Login Success:\",{token,user});// Small delay to show success message\nsetTimeout(()=>{navigate(\"/dashboard\");},1000);}catch(err){var _err$response,_err$response2,_err$response3,_err$response3$data;console.error(\"Login failed:\",err);// Better error handling\nlet errorMessage=\"Login failed\";if(err.code==='ECONNREFUSED'||err.code==='ERR_NETWORK'){errorMessage=\"Cannot connect to server. Please check if the server is running.\";}else if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){errorMessage=\"Invalid email or password\";}else if(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===429){errorMessage=\"Too many login attempts. Please try again later.\";}else if((_err$response3=err.response)!==null&&_err$response3!==void 0&&(_err$response3$data=_err$response3.data)!==null&&_err$response3$data!==void 0&&_err$response3$data.message){errorMessage=err.response.data.message;}setMessage(errorMessage);}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex justify-content-center align-items-center vh-100 bg-light\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow p-4\",style:{maxWidth:'400px',width:'100%'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Admin Login\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert \".concat(message.includes(\"successful\")?\"alert-success\":\"alert-danger\"),role:\"alert\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",placeholder:\"Enter email\",value:email,onChange:e=>setEmail(e.target.value),disabled:isLoading,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Enter password\",value:password,onChange:e=>setPassword(e.target.value),disabled:isLoading,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark w-100\",disabled:isLoading,children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\",\"aria-hidden\":\"true\"}),\"Logging in...\"]}):\"Login\"})]})]})});}export default AdminLogin;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminLogin","email","setEmail","password","setPassword","message","setMessage","isLoading","setIsLoading","navigate","api","create","baseURL","timeout","headers","handleLogin","e","preventDefault","res","post","trim","token","user","data","localStorage","setItem","JSON","stringify","console","log","setTimeout","err","_err$response","_err$response2","_err$response3","_err$response3$data","error","errorMessage","code","response","status","className","children","style","maxWidth","width","concat","includes","role","onSubmit","htmlFor","type","id","placeholder","value","onChange","target","disabled","required"],"sources":["D:/Edu Project/admin-frontend/src/pages/AdminLogin.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction AdminLogin() {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    // Create axios instance with base URL\r\n    const api = axios.create({\r\n        baseURL: 'http://localhost:5000/api',\r\n        timeout: 10000, // 10 second timeout\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        }\r\n    });\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        setMessage(\"\");\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const res = await api.post(\"/admin/login\", {\r\n                email: email.trim(),\r\n                password,\r\n            });\r\n\r\n            const { token, user } = res.data;\r\n\r\n            // Store token and user info\r\n            localStorage.setItem(\"adminToken\", token);\r\n            if (user) {\r\n                localStorage.setItem(\"adminUser\", JSON.stringify(user));\r\n            }\r\n\r\n            setMessage(\"Login successful!\");\r\n            console.log(\"Admin Login Success:\", { token, user });\r\n\r\n            // Small delay to show success message\r\n            setTimeout(() => {\r\n                navigate(\"/dashboard\");\r\n            }, 1000);\r\n\r\n        } catch (err) {\r\n            console.error(\"Login failed:\", err);\r\n\r\n            // Better error handling\r\n            let errorMessage = \"Login failed\";\r\n\r\n            if (err.code === 'ECONNREFUSED' || err.code === 'ERR_NETWORK') {\r\n                errorMessage = \"Cannot connect to server. Please check if the server is running.\";\r\n            } else if (err.response?.status === 401) {\r\n                errorMessage = \"Invalid email or password\";\r\n            } else if (err.response?.status === 429) {\r\n                errorMessage = \"Too many login attempts. Please try again later.\";\r\n            } else if (err.response?.data?.message) {\r\n                errorMessage = err.response.data.message;\r\n            }\r\n\r\n            setMessage(errorMessage);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container d-flex justify-content-center align-items-center vh-100 bg-light\">\r\n            <div className=\"card shadow p-4\" style={{ maxWidth: '400px', width: '100%' }}>\r\n                <h2 className=\"text-center mb-4\">Admin Login</h2>\r\n\r\n                {message && (\r\n                    <div\r\n                        className={`alert ${message.includes(\"successful\") ? \"alert-success\" : \"alert-danger\"}`}\r\n                        role=\"alert\"\r\n                    >\r\n                        {message}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={handleLogin}>\r\n                    <div className=\"mb-3\">\r\n                        <label htmlFor=\"email\" className=\"form-label\">\r\n                            Email address\r\n                        </label>\r\n                        <input\r\n                            type=\"email\"\r\n                            className=\"form-control\"\r\n                            id=\"email\"\r\n                            placeholder=\"Enter email\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            disabled={isLoading}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"mb-3\">\r\n                        <label htmlFor=\"password\" className=\"form-label\">\r\n                            Password\r\n                        </label>\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"form-control\"\r\n                            id=\"password\"\r\n                            placeholder=\"Enter password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            disabled={isLoading}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"btn btn-dark w-100\"\r\n                        disabled={isLoading}\r\n                    >\r\n                        {isLoading ? (\r\n                            <>\r\n                                <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                Logging in...\r\n                            </>\r\n                        ) : (\r\n                            \"Login\"\r\n                        )}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AdminLogin;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,sCAAsC,CAC7C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE/C,QAAS,CAAAC,UAAUA,CAAA,CAAG,CAClB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACgB,SAAS,CAAEC,YAAY,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAAkB,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9B;AACA,KAAM,CAAAiB,GAAG,CAAGlB,KAAK,CAACmB,MAAM,CAAC,CACrBC,OAAO,CAAE,2BAA2B,CACpCC,OAAO,CAAE,KAAK,CAAE;AAChBC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CACJ,CAAC,CAAC,CAEF,KAAM,CAAAC,WAAW,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC7BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBX,UAAU,CAAC,EAAE,CAAC,CACdE,YAAY,CAAC,IAAI,CAAC,CAElB,GAAI,CACA,KAAM,CAAAU,GAAG,CAAG,KAAM,CAAAR,GAAG,CAACS,IAAI,CAAC,cAAc,CAAE,CACvClB,KAAK,CAAEA,KAAK,CAACmB,IAAI,CAAC,CAAC,CACnBjB,QACJ,CAAC,CAAC,CAEF,KAAM,CAAEkB,KAAK,CAAEC,IAAK,CAAC,CAAGJ,GAAG,CAACK,IAAI,CAEhC;AACAC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAEJ,KAAK,CAAC,CACzC,GAAIC,IAAI,CAAE,CACNE,YAAY,CAACC,OAAO,CAAC,WAAW,CAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC,CAAC,CAC3D,CAEAhB,UAAU,CAAC,mBAAmB,CAAC,CAC/BsB,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAE,CAAER,KAAK,CAAEC,IAAK,CAAC,CAAC,CAEpD;AACAQ,UAAU,CAAC,IAAM,CACbrB,QAAQ,CAAC,YAAY,CAAC,CAC1B,CAAC,CAAE,IAAI,CAAC,CAEZ,CAAE,MAAOsB,GAAG,CAAE,KAAAC,aAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,mBAAA,CACVP,OAAO,CAACQ,KAAK,CAAC,eAAe,CAAEL,GAAG,CAAC,CAEnC;AACA,GAAI,CAAAM,YAAY,CAAG,cAAc,CAEjC,GAAIN,GAAG,CAACO,IAAI,GAAK,cAAc,EAAIP,GAAG,CAACO,IAAI,GAAK,aAAa,CAAE,CAC3DD,YAAY,CAAG,kEAAkE,CACrF,CAAC,IAAM,IAAI,EAAAL,aAAA,CAAAD,GAAG,CAACQ,QAAQ,UAAAP,aAAA,iBAAZA,aAAA,CAAcQ,MAAM,IAAK,GAAG,CAAE,CACrCH,YAAY,CAAG,2BAA2B,CAC9C,CAAC,IAAM,IAAI,EAAAJ,cAAA,CAAAF,GAAG,CAACQ,QAAQ,UAAAN,cAAA,iBAAZA,cAAA,CAAcO,MAAM,IAAK,GAAG,CAAE,CACrCH,YAAY,CAAG,kDAAkD,CACrE,CAAC,IAAM,KAAAH,cAAA,CAAIH,GAAG,CAACQ,QAAQ,UAAAL,cAAA,YAAAC,mBAAA,CAAZD,cAAA,CAAcX,IAAI,UAAAY,mBAAA,WAAlBA,mBAAA,CAAoB9B,OAAO,CAAE,CACpCgC,YAAY,CAAGN,GAAG,CAACQ,QAAQ,CAAChB,IAAI,CAAClB,OAAO,CAC5C,CAEAC,UAAU,CAAC+B,YAAY,CAAC,CAC5B,CAAC,OAAS,CACN7B,YAAY,CAAC,KAAK,CAAC,CACvB,CACJ,CAAC,CAED,mBACIb,IAAA,QAAK8C,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACvF7C,KAAA,QAAK4C,SAAS,CAAC,iBAAiB,CAACE,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAO,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAH,QAAA,eACzE/C,IAAA,OAAI8C,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,CAEhDrC,OAAO,eACJV,IAAA,QACI8C,SAAS,UAAAK,MAAA,CAAWzC,OAAO,CAAC0C,QAAQ,CAAC,YAAY,CAAC,CAAG,eAAe,CAAG,cAAc,CAAG,CACxFC,IAAI,CAAC,OAAO,CAAAN,QAAA,CAEXrC,OAAO,CACP,CACR,cAEDR,KAAA,SAAMoD,QAAQ,CAAElC,WAAY,CAAA2B,QAAA,eACxB7C,KAAA,QAAK4C,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjB/C,IAAA,UAAOuD,OAAO,CAAC,OAAO,CAACT,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,eAE9C,CAAO,CAAC,cACR/C,IAAA,UACIwD,IAAI,CAAC,OAAO,CACZV,SAAS,CAAC,cAAc,CACxBW,EAAE,CAAC,OAAO,CACVC,WAAW,CAAC,aAAa,CACzBC,KAAK,CAAErD,KAAM,CACbsD,QAAQ,CAAGvC,CAAC,EAAKd,QAAQ,CAACc,CAAC,CAACwC,MAAM,CAACF,KAAK,CAAE,CAC1CG,QAAQ,CAAElD,SAAU,CACpBmD,QAAQ,MACX,CAAC,EACD,CAAC,cAEN7D,KAAA,QAAK4C,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjB/C,IAAA,UAAOuD,OAAO,CAAC,UAAU,CAACT,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,UAEjD,CAAO,CAAC,cACR/C,IAAA,UACIwD,IAAI,CAAC,UAAU,CACfV,SAAS,CAAC,cAAc,CACxBW,EAAE,CAAC,UAAU,CACbC,WAAW,CAAC,gBAAgB,CAC5BC,KAAK,CAAEnD,QAAS,CAChBoD,QAAQ,CAAGvC,CAAC,EAAKZ,WAAW,CAACY,CAAC,CAACwC,MAAM,CAACF,KAAK,CAAE,CAC7CG,QAAQ,CAAElD,SAAU,CACpBmD,QAAQ,MACX,CAAC,EACD,CAAC,cAEN/D,IAAA,WACIwD,IAAI,CAAC,QAAQ,CACbV,SAAS,CAAC,oBAAoB,CAC9BgB,QAAQ,CAAElD,SAAU,CAAAmC,QAAA,CAEnBnC,SAAS,cACNV,KAAA,CAAAE,SAAA,EAAA2C,QAAA,eACI/C,IAAA,SAAM8C,SAAS,CAAC,uCAAuC,CAACO,IAAI,CAAC,QAAQ,CAAC,cAAY,MAAM,CAAO,CAAC,gBAEpG,EAAE,CAAC,CAEH,OACH,CACG,CAAC,EACP,CAAC,EACN,CAAC,CACL,CAAC,CAEd,CAEA,cAAe,CAAAhD,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}