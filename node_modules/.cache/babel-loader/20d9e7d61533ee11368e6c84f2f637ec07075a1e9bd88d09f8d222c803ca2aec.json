{"ast":null,"code":"/* eslint-disable no-loop-func *//* eslint-disable no-unused-vars */import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ManageCategories=()=>{var _categories$find,_categories$find2,_categories$find3;const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");const[name,setName]=useState(\"\");const[isActive,setIsActive]=useState(true);const[categoryType,setCategoryType]=useState(\"main\");const[selectedMainCategory,setSelectedMainCategory]=useState(null);const[selectedSubCategory,setSelectedSubCategory]=useState(null);const[parentId,setParentId]=useState(null);const[editingId,setEditingId]=useState(null);const[showModal,setShowModal]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);// Expanded states for dropdown functionality\nconst[expandedMainCategories,setExpandedMainCategories]=useState(new Set());const[expandedSubCategories,setExpandedSubCategories]=useState(new Set());// Filter dropdowns\nconst[filterMainCategory,setFilterMainCategory]=useState(\"\");const[filterSubCategory,setFilterSubCategory]=useState(\"\");// Sorting states\nconst[sortBy,setSortBy]=useState(\"name\");const[sortOrder,setSortOrder]=useState(\"asc\");// API Base URL - adjust this to your backend URL\nconst API_BASE_URL=\"http://localhost:5000/api/admin\";// Change this to your backend URL\n// Get auth token from localStorage\nconst getAuthToken=()=>{return localStorage.getItem(\"adminToken\")||\"\";};// API Headers\nconst getHeaders=()=>({\"Content-Type\":\"application/json\",\"Authorization\":`Bearer ${getAuthToken()}`});// Helper functions\nconst getCategoryLevel=type=>{switch(type){case\"main\":return 1;case\"sub\":return 2;case\"sub-sub\":return 3;default:return 1;}};const getCategoryTypeFromLevel=level=>{switch(level){case 1:return\"main\";case 2:return\"sub\";case 3:return\"sub-sub\";default:return\"main\";}};// FIXED: Updated helper functions to properly handle category relationships\nconst getMainCategories=()=>{return categories.filter(cat=>cat.level===1);};const getSubCategories=function(){let mainCategoryId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(mainCategoryId){return categories.filter(cat=>cat.level===2&&(cat.parentCategory===mainCategoryId||cat.parentCategory&&cat.parentCategory._id===mainCategoryId));}return categories.filter(cat=>cat.level===2);};const getSubSubCategories=function(){let subCategoryId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(subCategoryId){return categories.filter(cat=>cat.level===3&&(cat.parentCategory===subCategoryId||cat.parentCategory&&cat.parentCategory._id===subCategoryId));}return categories.filter(cat=>cat.level===3);};const getCategoryPath=category=>{const path=[];let current=category;while(current){path.unshift(current.name);const parentId=current.parentCategory&&current.parentCategory._id?current.parentCategory._id:current.parentCategory;current=categories.find(cat=>cat._id===parentId);}return path.join(\" > \");};// FIXED: Updated getChildrenCount to properly handle parent-child relationships\nconst getChildrenCount=categoryId=>{return categories.filter(cat=>{const parentId=cat.parentCategory&&cat.parentCategory._id?cat.parentCategory._id:cat.parentCategory;return parentId===categoryId;}).length;};// NEW: Function to find parent main category of a sub category\nconst findParentMainCategory=subCategoryId=>{const subCategory=categories.find(cat=>cat._id===subCategoryId);if(!subCategory)return null;const parentId=subCategory.parentCategory&&subCategory.parentCategory._id?subCategory.parentCategory._id:subCategory.parentCategory;return categories.find(cat=>cat._id===parentId);};// NEW: Auto-expansion logic when filters are applied\nconst applyAutoExpansion=()=>{const newExpandedMain=new Set(expandedMainCategories);const newExpandedSub=new Set(expandedSubCategories);// If sub-category filter is applied, expand its parent main category\nif(filterSubCategory){const parentMain=findParentMainCategory(filterSubCategory);if(parentMain){newExpandedMain.add(parentMain._id);// Also expand the sub-category itself to show its sub-sub categories\nnewExpandedSub.add(filterSubCategory);}}// If main category filter is applied, expand it\nif(filterMainCategory){newExpandedMain.add(filterMainCategory);}setExpandedMainCategories(newExpandedMain);setExpandedSubCategories(newExpandedSub);};// Apply auto-expansion whenever filters change\nuseEffect(()=>{if(filterMainCategory||filterSubCategory){applyAutoExpansion();}},[filterMainCategory,filterSubCategory,categories]);// Fetch categories from backend\nconst fetchCategories=async()=>{try{setLoading(true);const response=await fetch(`${API_BASE_URL}/categories`,{method:\"GET\",headers:getHeaders()});if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log(\"Fetched categories:\",data);// Debug log\nsetCategories(Array.isArray(data)?data:[]);setError(\"\");}catch(err){console.error(\"Error fetching categories:\",err);setError(\"Failed to fetch categories. Please try again.\");setCategories([]);}finally{setLoading(false);}};// Load categories on component mount\nuseEffect(()=>{fetchCategories();},[]);// Sort categories function\nconst sortCategories=categoryList=>{return[...categoryList].sort((a,b)=>{let aValue,bValue;switch(sortBy){case\"name\":aValue=a.name.toLowerCase();bValue=b.name.toLowerCase();break;case\"id\":aValue=a._id;bValue=b._id;break;case\"children\":aValue=getChildrenCount(a._id);bValue=getChildrenCount(b._id);break;default:aValue=a.name.toLowerCase();bValue=b.name.toLowerCase();}if(sortBy===\"name\"){const comparison=aValue.localeCompare(bValue);return sortOrder===\"asc\"?comparison:-comparison;}else{if(aValue<bValue)return sortOrder===\"asc\"?-1:1;if(aValue>bValue)return sortOrder===\"asc\"?1:-1;return 0;}});};// Get sorted sub categories\nconst getSortedSubCategories=parentId=>{const subCats=getSubCategories(parentId);return sortCategories(subCats);};// Get sorted sub-sub categories\nconst getSortedSubSubCategories=parentId=>{const subSubCats=getSubSubCategories(parentId);return sortCategories(subSubCats);};// Toggle functions for expand/collapse\nconst toggleMainCategory=categoryId=>{const newExpanded=new Set(expandedMainCategories);if(newExpanded.has(categoryId)){newExpanded.delete(categoryId);// Also collapse all sub-categories under this main category\nconst subCats=getSubCategories(categoryId);subCats.forEach(subCat=>{const newExpandedSub=new Set(expandedSubCategories);newExpandedSub.delete(subCat._id);setExpandedSubCategories(newExpandedSub);});}else{newExpanded.add(categoryId);}setExpandedMainCategories(newExpanded);};const toggleSubCategory=categoryId=>{const newExpanded=new Set(expandedSubCategories);if(newExpanded.has(categoryId)){newExpanded.delete(categoryId);}else{newExpanded.add(categoryId);}setExpandedSubCategories(newExpanded);};// Handle cascading dropdown changes\nconst handleMainCategoryChange=mainCatId=>{setSelectedMainCategory(mainCatId);setSelectedSubCategory(null);if(categoryType===\"sub\"){setParentId(mainCatId);}else if(categoryType===\"sub-sub\"){setParentId(null);}};const handleSubCategoryChange=subCatId=>{setSelectedSubCategory(subCatId);if(categoryType===\"sub-sub\"){setParentId(subCatId);}};// ENHANCED: Filter change handlers with visual feedback\nconst handleMainCategoryFilterChange=mainCatId=>{setFilterMainCategory(mainCatId);// Clear sub category filter when main category filter changes\nif(mainCatId){setFilterSubCategory(\"\");}};const handleSubCategoryFilterChange=subCatId=>{setFilterSubCategory(subCatId);// If sub-category is selected, clear main category filter to show all relevant categories\nif(subCatId){setFilterMainCategory(\"\");}};// ENHANCED: Clear filters with collapse functionality\nconst clearAllFilters=()=>{setFilterMainCategory(\"\");setFilterSubCategory(\"\");// Optionally collapse all categories when clearing filters\nsetExpandedMainCategories(new Set());setExpandedSubCategories(new Set());};// Form handlers\nconst handleSubmit=async e=>{e.preventDefault();if(!name.trim()){setError(\"Category name is required\");return;}setIsSubmitting(true);setError(\"\");try{const level=getCategoryLevel(categoryType);let finalParentId=null;if(categoryType===\"sub\"&&selectedMainCategory){finalParentId=selectedMainCategory;}else if(categoryType===\"sub-sub\"&&selectedSubCategory){finalParentId=selectedSubCategory;}const categoryData={name:name.trim(),level,parentCategory:finalParentId,isActive};console.log(\"Submitting category data:\",categoryData);// Debug log\nif(editingId){// Update existing category\nconst response=await fetch(`${API_BASE_URL}/categories/${editingId}`,{method:\"PUT\",headers:getHeaders(),body:JSON.stringify(categoryData)});if(!response.ok){const errorData=await response.json();throw new Error(errorData.message||\"Failed to update category\");}const data=await response.json();console.log(\"Category updated:\",data.message);}else{// Add new category\nconst response=await fetch(`${API_BASE_URL}/categories`,{method:\"POST\",headers:getHeaders(),body:JSON.stringify(categoryData)});if(!response.ok){const errorData=await response.json();throw new Error(errorData.message||\"Failed to add category\");}const data=await response.json();console.log(\"Category added:\",data);}// Refresh categories list\nawait fetchCategories();resetForm();setShowModal(false);}catch(err){console.error(\"Error saving category:\",err);setError(err.message||\"Failed to save category. Please try again.\");}finally{setIsSubmitting(false);}};const resetForm=()=>{setName(\"\");setIsActive(true);setCategoryType(\"main\");setSelectedMainCategory(null);setSelectedSubCategory(null);setParentId(null);setEditingId(null);setError(\"\");};const handleEdit=category=>{setName(category.name);setIsActive(category.isActive);setCategoryType(getCategoryTypeFromLevel(category.level));if(category.level===2){const parentId=category.parentCategory&&category.parentCategory._id?category.parentCategory._id:category.parentCategory;setSelectedMainCategory(parentId);setSelectedSubCategory(null);}else if(category.level===3){const parentId=category.parentCategory&&category.parentCategory._id?category.parentCategory._id:category.parentCategory;const parentSub=categories.find(cat=>cat._id===parentId);if(parentSub){const grandParentId=parentSub.parentCategory&&parentSub.parentCategory._id?parentSub.parentCategory._id:parentSub.parentCategory;setSelectedMainCategory(grandParentId);setSelectedSubCategory(parentSub._id);}}else{setSelectedMainCategory(null);setSelectedSubCategory(null);}const parentId=category.parentCategory&&category.parentCategory._id?category.parentCategory._id:category.parentCategory;setParentId(parentId);setEditingId(category._id);setError(\"\");setShowModal(true);};const handleDelete=async id=>{const hasChildren=getChildrenCount(id)>0;if(hasChildren){alert(\"Cannot delete category that has subcategories. Please delete subcategories first.\");return;}if(window.confirm(\"Are you sure you want to delete this category?\")){try{const response=await fetch(`${API_BASE_URL}/categories/${id}`,{method:\"DELETE\",headers:getHeaders()});if(!response.ok){const errorData=await response.json();throw new Error(errorData.message||\"Failed to delete category\");}console.log(\"Category deleted successfully\");await fetchCategories();// Refresh the list\n}catch(err){console.error(\"Error deleting category:\",err);alert(err.message||\"Failed to delete category. Please try again.\");}}};// Get filtered main categories\nconst getFilteredMainCategories=()=>{let mainCats=getMainCategories();if(filterMainCategory){mainCats=mainCats.filter(cat=>cat._id===filterMainCategory);}return sortCategories(mainCats);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center\",style:{height:\"400px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-0\",children:\"Manage Categories\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>{resetForm();setShowModal(true);},children:\"Add New Category\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info mb-4\",children:/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Debug:\"}),\" Total categories loaded: \",categories.length,/*#__PURE__*/_jsx(\"br\",{}),\"Main: \",categories.filter(cat=>cat.level===1).length,\" | Sub: \",categories.filter(cat=>cat.level===2).length,\" | Sub-Sub: \",categories.filter(cat=>cat.level===3).length,(filterMainCategory||filterSubCategory)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-filter me-1\"}),\"Active Filters: \",filterMainCategory?\"Main Category\":\"\",\" \",filterSubCategory?\"Sub Category\":\"\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"Main Categories\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-primary\",children:categories.filter(cat=>cat.level===1).length})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"Sub Categories\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-info\",children:categories.filter(cat=>cat.level===2).length})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"Sub-Sub Categories\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-success\",children:categories.filter(cat=>cat.level===3).length})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0 text-center\",children:[\"Filter & Sort Categories\",(filterMainCategory||filterSubCategory)&&/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-warning text-dark ms-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-filter me-1\"}),\"Filters Active\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 text-center\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-3\",children:\"Filter Options\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Main Category\",filterMainCategory&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-primary ms-2\",children:\"Active\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:filterMainCategory,onChange:e=>handleMainCategoryFilterChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Main Categories\"}),getMainCategories().map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat._id,children:cat.name},cat._id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Sub Category\",filterSubCategory&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-info ms-2\",children:\"Active\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:filterSubCategory,onChange:e=>handleSubCategoryFilterChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Sub Categories\"}),getSubCategories().map(cat=>{var _findParentMainCatego;return/*#__PURE__*/_jsxs(\"option\",{value:cat._id,children:[cat.name,\" (\",((_findParentMainCatego=findParentMainCategory(cat._id))===null||_findParentMainCatego===void 0?void 0:_findParentMainCatego.name)||'Unknown Parent',\")\"]},cat._id);})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 text-center\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-3\",children:\"Sort Options\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Sort Order\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:sortOrder,onChange:e=>setSortOrder(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"asc\",children:\"A to Z\"}),/*#__PURE__*/_jsx(\"option\",{value:\"desc\",children:\"Z to A\"})]})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary\",onClick:clearAllFilters,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-filter me-1\"}),\"Clear All Filters\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-info\",onClick:()=>{setSortBy(\"name\");setSortOrder(\"asc\");},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sort me-1\"}),\"Reset Sorting\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-success\",onClick:()=>{setExpandedMainCategories(new Set(getMainCategories().map(cat=>cat._id)));setExpandedSubCategories(new Set(getSubCategories().map(cat=>cat._id)));},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-expand me-1\"}),\"Expand All\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-warning\",onClick:()=>{setExpandedMainCategories(new Set());setExpandedSubCategories(new Set());},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-compress me-1\"}),\"Collapse All\"]})]})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0 text-center\",children:\"Categories\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:getFilteredMainCategories().length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-muted py-4\",children:\"No categories found matching the current filters.\"}):getFilteredMainCategories().map((mainCategory,index)=>{const subCategories=getSortedSubCategories(mainCategory._id);const isMainExpanded=expandedMainCategories.has(mainCategory._id);// Filter sub categories if filter is applied\nconst filteredSubCategories=filterSubCategory?subCategories.filter(sub=>sub._id===filterSubCategory):subCategories;return/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`p-3 d-flex justify-content-between align-items-center ${filterMainCategory===mainCategory._id?'bg-primary text-white':'bg-light'}`,style:{cursor:\"pointer\"},onClick:()=>toggleMainCategory(mainCategory._id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:`fas ${isMainExpanded?\"fa-chevron-down\":\"fa-chevron-right\"} me-2`}),/*#__PURE__*/_jsx(\"span\",{className:`badge me-2 ${filterMainCategory===mainCategory._id?'bg-light text-primary':'bg-primary'}`,children:\"Main\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[index+1,\". \",mainCategory.name]}),/*#__PURE__*/_jsxs(\"small\",{className:`ms-2 ${filterMainCategory===mainCategory._id?'text-light':'text-muted'}`,children:[\"(\",getChildrenCount(mainCategory._id),\" sub-categories)\"]}),filterMainCategory===mainCategory._id&&/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-warning text-dark ms-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-filter me-1\"}),\"Filtered\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:`btn btn-sm me-2 ${filterMainCategory===mainCategory._id?'btn-outline-light':'btn-outline-primary'}`,onClick:e=>{e.stopPropagation();handleEdit(mainCategory);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:`btn btn-sm ${filterMainCategory===mainCategory._id?'btn-outline-light':'btn-outline-danger'}`,onClick:e=>{e.stopPropagation();handleDelete(mainCategory._id);},children:\"Delete\"})]})]}),isMainExpanded&&filteredSubCategories.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"border-top\",children:filteredSubCategories.map(subCategory=>{const subSubCategories=getSortedSubSubCategories(subCategory._id);const isSubExpanded=expandedSubCategories.has(subCategory._id);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:`p-3 ps-5 d-flex justify-content-between align-items-center border-bottom ${filterSubCategory===subCategory._id?'bg-info text-white':'bg-white'}`,style:{cursor:\"pointer\"},onClick:()=>toggleSubCategory(subCategory._id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:`badge me-2 ${filterSubCategory===subCategory._id?'bg-light text-info':'bg-info'}`,children:\"Sub\"}),/*#__PURE__*/_jsx(\"strong\",{children:subCategory.name}),/*#__PURE__*/_jsxs(\"small\",{className:`ms-2 ${filterSubCategory===subCategory._id?'text-light':'text-muted'}`,children:[\"(\",getChildrenCount(subCategory._id),\" sub-sub categories)\"]}),filterSubCategory===subCategory._id&&/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-warning text-dark ms-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-filter me-1\"}),\"Filtered\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:`btn btn-sm me-2 ${filterSubCategory===subCategory._id?'btn-outline-light':'btn-outline-primary'}`,onClick:e=>{e.stopPropagation();handleEdit(subCategory);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:`btn btn-sm ${filterSubCategory===subCategory._id?'btn-outline-light':'btn-outline-danger'}`,onClick:e=>{e.stopPropagation();handleDelete(subCategory._id);},children:\"Delete\"})]})]}),isSubExpanded&&subSubCategories.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-light\",children:subSubCategories.map(subSubCategory=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 ps-5 ms-4 d-flex justify-content-between align-items-center border-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-success me-2\",children:\"Sub-Sub\"}),/*#__PURE__*/_jsx(\"strong\",{children:subSubCategory.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary me-2\",onClick:()=>handleEdit(subSubCategory),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-danger\",onClick:()=>handleDelete(subSubCategory._id),children:\"Delete\"})]})]},subSubCategory._id))})]},subCategory._id);})})]})},mainCategory._id);})})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal show d-block\",style:{backgroundColor:\"rgba(0,0,0,0.5)\"},tabIndex:\"-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg modal-dialog-centered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header bg-primary text-white\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:editingId?\"Edit Category\":\"Add New Category\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close btn-close-white\",onClick:()=>{setShowModal(false);resetForm();}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger alert-dismissible\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle me-2\"}),error,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setError(\"\")})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label fw-bold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-layer-group me-2\"}),\"Category Type\"]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select form-select-lg\",value:categoryType,onChange:e=>{setCategoryType(e.target.value);setSelectedMainCategory(null);setSelectedSubCategory(null);setParentId(null);},disabled:editingId,children:[/*#__PURE__*/_jsx(\"option\",{value:\"main\",children:\"\\uD83C\\uDFE0 Main Category (Level 1)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sub\",children:\"\\uD83D\\uDCC1 Sub Category (Level 2)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sub-sub\",children:\"\\uD83D\\uDCC4 Sub-Sub Category (Level 3)\"})]}),editingId&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle me-1\"}),\"Category type cannot be changed when editing\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label fw-bold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-toggle-on me-2\"}),\"Status\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-switch mt-2\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"isActiveSwitch\",checked:isActive,onChange:e=>setIsActive(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"isActiveSwitch\",children:/*#__PURE__*/_jsx(\"span\",{className:`badge ${isActive?'bg-success':'bg-secondary'}`,children:isActive?'Active':'Inactive'})})]})]})]}),categoryType!==\"main\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-light\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sitemap me-2\"}),\"Parent Category Selection\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label fw-bold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home me-2\"}),\"Main Category *\"]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:selectedMainCategory||\"\",onChange:e=>handleMainCategoryChange(e.target.value?e.target.value:null),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select Main Category --\"}),getMainCategories().map(cat=>/*#__PURE__*/_jsxs(\"option\",{value:cat._id,children:[\"\\uD83C\\uDFE0 \",cat.name,\" (\",getChildrenCount(cat._id),\" sub-categories)\"]},cat._id))]})]}),categoryType===\"sub-sub\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label fw-bold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-folder me-2\"}),\"Sub Category *\"]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:selectedSubCategory||\"\",onChange:e=>handleSubCategoryChange(e.target.value?e.target.value:null),disabled:!selectedMainCategory,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select Sub Category --\"}),selectedMainCategory&&getSubCategories(selectedMainCategory).map(cat=>/*#__PURE__*/_jsxs(\"option\",{value:cat._id,children:[\"\\uD83D\\uDCC1 \",cat.name,\" (\",getChildrenCount(cat._id),\" sub-sub categories)\"]},cat._id))]}),!selectedMainCategory&&/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Please select a main category first\"})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label fw-bold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tag me-2\"}),\"Category Name *\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg\",value:name,onChange:e=>setName(e.target.value),placeholder:\"Enter category name...\",required:true,maxLength:100}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-text\",children:[name.length,\"/100 characters\"]})]}),name&&/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-info text-white\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye me-2\"}),\"Live Preview\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category Path:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-secondary me-1\",children:\"Path:\"}),categoryType===\"main\"?/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-primary fs-6\",children:name}):categoryType===\"sub\"&&selectedMainCategory?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-primary me-1\",children:(_categories$find=categories.find(cat=>cat._id===selectedMainCategory))===null||_categories$find===void 0?void 0:_categories$find.name}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-right mx-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-info fs-6\",children:name})]}):categoryType===\"sub-sub\"&&selectedMainCategory&&selectedSubCategory?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-primary me-1\",children:(_categories$find2=categories.find(cat=>cat._id===selectedMainCategory))===null||_categories$find2===void 0?void 0:_categories$find2.name}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-right mx-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-info me-1\",children:(_categories$find3=categories.find(cat=>cat._id===selectedSubCategory))===null||_categories$find3===void 0?void 0:_categories$find3.name}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-right mx-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-success fs-6\",children:name})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"text-warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle me-1\"}),\"Please select all required parent categories\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 text-end\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-light text-dark\",children:[\"Level: \",getCategoryLevel(categoryType)]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:`badge ${isActive?'bg-success':'bg-secondary'}`,children:isActive?'Active':'Inactive'})})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer bg-light\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between w-100\",children:[/*#__PURE__*/_jsx(\"div\",{children:editingId&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle me-1\"}),\"Editing existing category\"]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-outline-secondary me-2\",onClick:()=>{setShowModal(false);resetForm();},disabled:isSubmitting,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times me-1\"}),\"Cancel\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSubmitting||!name.trim(),children:isSubmitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\",\"aria-hidden\":\"true\"}),editingId?\"Updating...\":\"Saving...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:`fas ${editingId?'fa-save':'fa-plus'} me-1`}),editingId?\"Update Category\":\"Save Category\"]})})]})]})})]})]})]})})}),isSubmitting&&/*#__PURE__*/_jsx(\"div\",{className:\"position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center\",style:{backgroundColor:\"rgba(0,0,0,0.3)\",zIndex:9999},children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary mb-3\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"h6\",{children:editingId?\"Updating category...\":\"Adding category...\"})]})})})]});};export default ManageCategories;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ManageCategories","_categories$find","_categories$find2","_categories$find3","categories","setCategories","loading","setLoading","error","setError","name","setName","isActive","setIsActive","categoryType","setCategoryType","selectedMainCategory","setSelectedMainCategory","selectedSubCategory","setSelectedSubCategory","parentId","setParentId","editingId","setEditingId","showModal","setShowModal","isSubmitting","setIsSubmitting","expandedMainCategories","setExpandedMainCategories","Set","expandedSubCategories","setExpandedSubCategories","filterMainCategory","setFilterMainCategory","filterSubCategory","setFilterSubCategory","sortBy","setSortBy","sortOrder","setSortOrder","API_BASE_URL","getAuthToken","localStorage","getItem","getHeaders","getCategoryLevel","type","getCategoryTypeFromLevel","level","getMainCategories","filter","cat","getSubCategories","mainCategoryId","arguments","length","undefined","parentCategory","_id","getSubSubCategories","subCategoryId","getCategoryPath","category","path","current","unshift","find","join","getChildrenCount","categoryId","findParentMainCategory","subCategory","applyAutoExpansion","newExpandedMain","newExpandedSub","parentMain","add","fetchCategories","response","fetch","method","headers","ok","Error","status","data","json","console","log","Array","isArray","err","sortCategories","categoryList","sort","a","b","aValue","bValue","toLowerCase","comparison","localeCompare","getSortedSubCategories","subCats","getSortedSubSubCategories","subSubCats","toggleMainCategory","newExpanded","has","delete","forEach","subCat","toggleSubCategory","handleMainCategoryChange","mainCatId","handleSubCategoryChange","subCatId","handleMainCategoryFilterChange","handleSubCategoryFilterChange","clearAllFilters","handleSubmit","e","preventDefault","trim","finalParentId","categoryData","body","JSON","stringify","errorData","message","resetForm","handleEdit","parentSub","grandParentId","handleDelete","id","hasChildren","alert","window","confirm","getFilteredMainCategories","mainCats","className","children","style","height","role","onClick","value","onChange","target","map","_findParentMainCatego","mainCategory","index","subCategories","isMainExpanded","filteredSubCategories","sub","cursor","stopPropagation","subSubCategories","isSubExpanded","subSubCategory","backgroundColor","tabIndex","onSubmit","disabled","checked","htmlFor","required","placeholder","maxLength","zIndex"],"sources":["D:/Edu Project/admin-frontend/src/pages/ManageCategories.jsx"],"sourcesContent":["/* eslint-disable no-loop-func */\r\n/* eslint-disable no-unused-vars */\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nconst ManageCategories = () => {\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [isActive, setIsActive] = useState(true);\r\n  const [categoryType, setCategoryType] = useState(\"main\");\r\n  const [selectedMainCategory, setSelectedMainCategory] = useState(null);\r\n  const [selectedSubCategory, setSelectedSubCategory] = useState(null);\r\n  const [parentId, setParentId] = useState(null);\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Expanded states for dropdown functionality\r\n  const [expandedMainCategories, setExpandedMainCategories] = useState(new Set());\r\n  const [expandedSubCategories, setExpandedSubCategories] = useState(new Set());\r\n\r\n  // Filter dropdowns\r\n  const [filterMainCategory, setFilterMainCategory] = useState(\"\");\r\n  const [filterSubCategory, setFilterSubCategory] = useState(\"\");\r\n\r\n  // Sorting states\r\n  const [sortBy, setSortBy] = useState(\"name\");\r\n  const [sortOrder, setSortOrder] = useState(\"asc\");\r\n\r\n  // API Base URL - adjust this to your backend URL\r\n  const API_BASE_URL = \"http://localhost:5000/api/admin\"; // Change this to your backend URL\r\n\r\n  // Get auth token from localStorage\r\n  const getAuthToken = () => {\r\n    return localStorage.getItem(\"adminToken\") || \"\";\r\n  };\r\n\r\n  // API Headers\r\n  const getHeaders = () => ({\r\n    \"Content-Type\": \"application/json\",\r\n    \"Authorization\": `Bearer ${getAuthToken()}`\r\n  });\r\n\r\n  // Helper functions\r\n  const getCategoryLevel = (type) => {\r\n    switch (type) {\r\n      case \"main\": return 1;\r\n      case \"sub\": return 2;\r\n      case \"sub-sub\": return 3;\r\n      default: return 1;\r\n    }\r\n  };\r\n\r\n  const getCategoryTypeFromLevel = (level) => {\r\n    switch (level) {\r\n      case 1: return \"main\";\r\n      case 2: return \"sub\";\r\n      case 3: return \"sub-sub\";\r\n      default: return \"main\";\r\n    }\r\n  };\r\n\r\n  // FIXED: Updated helper functions to properly handle category relationships\r\n  const getMainCategories = () => {\r\n    return categories.filter((cat) => cat.level === 1);\r\n  };\r\n\r\n  const getSubCategories = (mainCategoryId = null) => {\r\n    if (mainCategoryId) {\r\n      return categories.filter(\r\n        (cat) => cat.level === 2 &&\r\n          (cat.parentCategory === mainCategoryId ||\r\n            (cat.parentCategory && cat.parentCategory._id === mainCategoryId))\r\n      );\r\n    }\r\n    return categories.filter((cat) => cat.level === 2);\r\n  };\r\n\r\n  const getSubSubCategories = (subCategoryId = null) => {\r\n    if (subCategoryId) {\r\n      return categories.filter(\r\n        (cat) => cat.level === 3 &&\r\n          (cat.parentCategory === subCategoryId ||\r\n            (cat.parentCategory && cat.parentCategory._id === subCategoryId))\r\n      );\r\n    }\r\n    return categories.filter((cat) => cat.level === 3);\r\n  };\r\n\r\n  const getCategoryPath = (category) => {\r\n    const path = [];\r\n    let current = category;\r\n\r\n    while (current) {\r\n      path.unshift(current.name);\r\n      const parentId = current.parentCategory && current.parentCategory._id\r\n        ? current.parentCategory._id\r\n        : current.parentCategory;\r\n      current = categories.find((cat) => cat._id === parentId);\r\n    }\r\n\r\n    return path.join(\" > \");\r\n  };\r\n\r\n  // FIXED: Updated getChildrenCount to properly handle parent-child relationships\r\n  const getChildrenCount = (categoryId) => {\r\n    return categories.filter((cat) => {\r\n      const parentId = cat.parentCategory && cat.parentCategory._id\r\n        ? cat.parentCategory._id\r\n        : cat.parentCategory;\r\n      return parentId === categoryId;\r\n    }).length;\r\n  };\r\n\r\n  // NEW: Function to find parent main category of a sub category\r\n  const findParentMainCategory = (subCategoryId) => {\r\n    const subCategory = categories.find(cat => cat._id === subCategoryId);\r\n    if (!subCategory) return null;\r\n\r\n    const parentId = subCategory.parentCategory && subCategory.parentCategory._id\r\n      ? subCategory.parentCategory._id\r\n      : subCategory.parentCategory;\r\n\r\n    return categories.find(cat => cat._id === parentId);\r\n  };\r\n\r\n  // NEW: Auto-expansion logic when filters are applied\r\n  const applyAutoExpansion = () => {\r\n    const newExpandedMain = new Set(expandedMainCategories);\r\n    const newExpandedSub = new Set(expandedSubCategories);\r\n\r\n    // If sub-category filter is applied, expand its parent main category\r\n    if (filterSubCategory) {\r\n      const parentMain = findParentMainCategory(filterSubCategory);\r\n      if (parentMain) {\r\n        newExpandedMain.add(parentMain._id);\r\n\r\n        // Also expand the sub-category itself to show its sub-sub categories\r\n        newExpandedSub.add(filterSubCategory);\r\n      }\r\n    }\r\n\r\n    // If main category filter is applied, expand it\r\n    if (filterMainCategory) {\r\n      newExpandedMain.add(filterMainCategory);\r\n    }\r\n\r\n    setExpandedMainCategories(newExpandedMain);\r\n    setExpandedSubCategories(newExpandedSub);\r\n  };\r\n\r\n  // Apply auto-expansion whenever filters change\r\n  useEffect(() => {\r\n    if (filterMainCategory || filterSubCategory) {\r\n      applyAutoExpansion();\r\n    }\r\n  }, [filterMainCategory, filterSubCategory, categories]);\r\n\r\n  // Fetch categories from backend\r\n  const fetchCategories = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/categories`, {\r\n        method: \"GET\",\r\n        headers: getHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log(\"Fetched categories:\", data); // Debug log\r\n      setCategories(Array.isArray(data) ? data : []);\r\n      setError(\"\");\r\n    } catch (err) {\r\n      console.error(\"Error fetching categories:\", err);\r\n      setError(\"Failed to fetch categories. Please try again.\");\r\n      setCategories([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load categories on component mount\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  // Sort categories function\r\n  const sortCategories = (categoryList) => {\r\n    return [...categoryList].sort((a, b) => {\r\n      let aValue, bValue;\r\n\r\n      switch (sortBy) {\r\n        case \"name\":\r\n          aValue = a.name.toLowerCase();\r\n          bValue = b.name.toLowerCase();\r\n          break;\r\n        case \"id\":\r\n          aValue = a._id;\r\n          bValue = b._id;\r\n          break;\r\n        case \"children\":\r\n          aValue = getChildrenCount(a._id);\r\n          bValue = getChildrenCount(b._id);\r\n          break;\r\n        default:\r\n          aValue = a.name.toLowerCase();\r\n          bValue = b.name.toLowerCase();\r\n      }\r\n\r\n      if (sortBy === \"name\") {\r\n        const comparison = aValue.localeCompare(bValue);\r\n        return sortOrder === \"asc\" ? comparison : -comparison;\r\n      } else {\r\n        if (aValue < bValue) return sortOrder === \"asc\" ? -1 : 1;\r\n        if (aValue > bValue) return sortOrder === \"asc\" ? 1 : -1;\r\n        return 0;\r\n      }\r\n    });\r\n  };\r\n\r\n  // Get sorted sub categories\r\n  const getSortedSubCategories = (parentId) => {\r\n    const subCats = getSubCategories(parentId);\r\n    return sortCategories(subCats);\r\n  };\r\n\r\n  // Get sorted sub-sub categories\r\n  const getSortedSubSubCategories = (parentId) => {\r\n    const subSubCats = getSubSubCategories(parentId);\r\n    return sortCategories(subSubCats);\r\n  };\r\n\r\n  // Toggle functions for expand/collapse\r\n  const toggleMainCategory = (categoryId) => {\r\n    const newExpanded = new Set(expandedMainCategories);\r\n    if (newExpanded.has(categoryId)) {\r\n      newExpanded.delete(categoryId);\r\n      // Also collapse all sub-categories under this main category\r\n      const subCats = getSubCategories(categoryId);\r\n      subCats.forEach((subCat) => {\r\n        const newExpandedSub = new Set(expandedSubCategories);\r\n        newExpandedSub.delete(subCat._id);\r\n        setExpandedSubCategories(newExpandedSub);\r\n      });\r\n    } else {\r\n      newExpanded.add(categoryId);\r\n    }\r\n    setExpandedMainCategories(newExpanded);\r\n  };\r\n\r\n  const toggleSubCategory = (categoryId) => {\r\n    const newExpanded = new Set(expandedSubCategories);\r\n    if (newExpanded.has(categoryId)) {\r\n      newExpanded.delete(categoryId);\r\n    } else {\r\n      newExpanded.add(categoryId);\r\n    }\r\n    setExpandedSubCategories(newExpanded);\r\n  };\r\n\r\n  // Handle cascading dropdown changes\r\n  const handleMainCategoryChange = (mainCatId) => {\r\n    setSelectedMainCategory(mainCatId);\r\n    setSelectedSubCategory(null);\r\n\r\n    if (categoryType === \"sub\") {\r\n      setParentId(mainCatId);\r\n    } else if (categoryType === \"sub-sub\") {\r\n      setParentId(null);\r\n    }\r\n  };\r\n\r\n  const handleSubCategoryChange = (subCatId) => {\r\n    setSelectedSubCategory(subCatId);\r\n\r\n    if (categoryType === \"sub-sub\") {\r\n      setParentId(subCatId);\r\n    }\r\n  };\r\n\r\n  // ENHANCED: Filter change handlers with visual feedback\r\n  const handleMainCategoryFilterChange = (mainCatId) => {\r\n    setFilterMainCategory(mainCatId);\r\n    // Clear sub category filter when main category filter changes\r\n    if (mainCatId) {\r\n      setFilterSubCategory(\"\");\r\n    }\r\n  };\r\n\r\n  const handleSubCategoryFilterChange = (subCatId) => {\r\n    setFilterSubCategory(subCatId);\r\n    // If sub-category is selected, clear main category filter to show all relevant categories\r\n    if (subCatId) {\r\n      setFilterMainCategory(\"\");\r\n    }\r\n  };\r\n\r\n  // ENHANCED: Clear filters with collapse functionality\r\n  const clearAllFilters = () => {\r\n    setFilterMainCategory(\"\");\r\n    setFilterSubCategory(\"\");\r\n    // Optionally collapse all categories when clearing filters\r\n    setExpandedMainCategories(new Set());\r\n    setExpandedSubCategories(new Set());\r\n  };\r\n\r\n  // Form handlers\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!name.trim()) {\r\n      setError(\"Category name is required\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const level = getCategoryLevel(categoryType);\r\n      let finalParentId = null;\r\n\r\n      if (categoryType === \"sub\" && selectedMainCategory) {\r\n        finalParentId = selectedMainCategory;\r\n      } else if (categoryType === \"sub-sub\" && selectedSubCategory) {\r\n        finalParentId = selectedSubCategory;\r\n      }\r\n\r\n      const categoryData = {\r\n        name: name.trim(),\r\n        level,\r\n        parentCategory: finalParentId,\r\n        isActive\r\n      };\r\n\r\n      console.log(\"Submitting category data:\", categoryData); // Debug log\r\n\r\n      if (editingId) {\r\n        // Update existing category\r\n        const response = await fetch(`${API_BASE_URL}/categories/${editingId}`, {\r\n          method: \"PUT\",\r\n          headers: getHeaders(),\r\n          body: JSON.stringify(categoryData),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json();\r\n          throw new Error(errorData.message || \"Failed to update category\");\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(\"Category updated:\", data.message);\r\n      } else {\r\n        // Add new category\r\n        const response = await fetch(`${API_BASE_URL}/categories`, {\r\n          method: \"POST\",\r\n          headers: getHeaders(),\r\n          body: JSON.stringify(categoryData),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json();\r\n          throw new Error(errorData.message || \"Failed to add category\");\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(\"Category added:\", data);\r\n      }\r\n\r\n      // Refresh categories list\r\n      await fetchCategories();\r\n      resetForm();\r\n      setShowModal(false);\r\n    } catch (err) {\r\n      console.error(\"Error saving category:\", err);\r\n      setError(err.message || \"Failed to save category. Please try again.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setName(\"\");\r\n    setIsActive(true);\r\n    setCategoryType(\"main\");\r\n    setSelectedMainCategory(null);\r\n    setSelectedSubCategory(null);\r\n    setParentId(null);\r\n    setEditingId(null);\r\n    setError(\"\");\r\n  };\r\n\r\n  const handleEdit = (category) => {\r\n    setName(category.name);\r\n    setIsActive(category.isActive);\r\n    setCategoryType(getCategoryTypeFromLevel(category.level));\r\n\r\n    if (category.level === 2) {\r\n      const parentId = category.parentCategory && category.parentCategory._id\r\n        ? category.parentCategory._id\r\n        : category.parentCategory;\r\n      setSelectedMainCategory(parentId);\r\n      setSelectedSubCategory(null);\r\n    } else if (category.level === 3) {\r\n      const parentId = category.parentCategory && category.parentCategory._id\r\n        ? category.parentCategory._id\r\n        : category.parentCategory;\r\n      const parentSub = categories.find((cat) => cat._id === parentId);\r\n      if (parentSub) {\r\n        const grandParentId = parentSub.parentCategory && parentSub.parentCategory._id\r\n          ? parentSub.parentCategory._id\r\n          : parentSub.parentCategory;\r\n        setSelectedMainCategory(grandParentId);\r\n        setSelectedSubCategory(parentSub._id);\r\n      }\r\n    } else {\r\n      setSelectedMainCategory(null);\r\n      setSelectedSubCategory(null);\r\n    }\r\n\r\n    const parentId = category.parentCategory && category.parentCategory._id\r\n      ? category.parentCategory._id\r\n      : category.parentCategory;\r\n    setParentId(parentId);\r\n    setEditingId(category._id);\r\n    setError(\"\");\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    const hasChildren = getChildrenCount(id) > 0;\r\n\r\n    if (hasChildren) {\r\n      alert(\"Cannot delete category that has subcategories. Please delete subcategories first.\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(\"Are you sure you want to delete this category?\")) {\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/categories/${id}`, {\r\n          method: \"DELETE\",\r\n          headers: getHeaders(),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json();\r\n          throw new Error(errorData.message || \"Failed to delete category\");\r\n        }\r\n\r\n        console.log(\"Category deleted successfully\");\r\n        await fetchCategories(); // Refresh the list\r\n      } catch (err) {\r\n        console.error(\"Error deleting category:\", err);\r\n        alert(err.message || \"Failed to delete category. Please try again.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  // Get filtered main categories\r\n  const getFilteredMainCategories = () => {\r\n    let mainCats = getMainCategories();\r\n\r\n    if (filterMainCategory) {\r\n      mainCats = mainCats.filter((cat) => cat._id === filterMainCategory);\r\n    }\r\n\r\n    return sortCategories(mainCats);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mt-4\">\r\n        <div className=\"d-flex justify-content-center align-items-center\" style={{ height: \"400px\" }}>\r\n          <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <div className=\"d-flex justify-content-between align-items-center mb-5\">\r\n        <h2 className=\"mb-0\">Manage Categories</h2>\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          onClick={() => {\r\n            resetForm();\r\n            setShowModal(true);\r\n          }}\r\n        >\r\n          Add New Category\r\n        </button>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Debug Information */}\r\n      <div className=\"alert alert-info mb-4\">\r\n        <small>\r\n          <strong>Debug:</strong> Total categories loaded: {categories.length}\r\n          <br />\r\n          Main: {categories.filter((cat) => cat.level === 1).length} |\r\n          Sub: {categories.filter((cat) => cat.level === 2).length} |\r\n          Sub-Sub: {categories.filter((cat) => cat.level === 3).length}\r\n          {(filterMainCategory || filterSubCategory) && (\r\n            <>\r\n              <br />\r\n              <span className=\"text-warning\">\r\n                <i className=\"fas fa-filter me-1\"></i>\r\n                Active Filters: {filterMainCategory ? \"Main Category\" : \"\"} {filterSubCategory ? \"Sub Category\" : \"\"}\r\n              </span>\r\n            </>\r\n          )}\r\n        </small>\r\n      </div>\r\n\r\n      {/* Category Statistics */}\r\n      <div className=\"row mb-4\">\r\n        <div className=\"col-md-4\">\r\n          <div className=\"card text-center\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Main Categories</h5>\r\n              <h3 className=\"text-primary\">\r\n                {categories.filter((cat) => cat.level === 1).length}\r\n              </h3>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-4\">\r\n          <div className=\"card text-center\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Sub Categories</h5>\r\n              <h3 className=\"text-info\">\r\n                {categories.filter((cat) => cat.level === 2).length}\r\n              </h3>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-4\">\r\n          <div className=\"card text-center\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Sub-Sub Categories</h5>\r\n              <h3 className=\"text-success\">\r\n                {categories.filter((cat) => cat.level === 3).length}\r\n              </h3>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filter and Sort Section */}\r\n      <div className=\"card mb-4\">\r\n        <div className=\"card-header\">\r\n          <h5 className=\"mb-0 text-center\">\r\n            Filter & Sort Categories\r\n            {(filterMainCategory || filterSubCategory) && (\r\n              <span className=\"badge bg-warning text-dark ms-2\">\r\n                <i className=\"fas fa-filter me-1\"></i>\r\n                Filters Active\r\n              </span>\r\n            )}\r\n          </h5>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"row\">\r\n            {/* Filter Section */}\r\n            <div className=\"col-md-8 text-center\">\r\n              <h6 className=\"text-muted mb-3\">Filter Options</h6>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                  <label className=\"form-label\">\r\n                    Main Category\r\n                    {filterMainCategory && (\r\n                      <span className=\"badge bg-primary ms-2\">Active</span>\r\n                    )}\r\n                  </label>\r\n                  <select\r\n                    className=\"form-select\"\r\n                    value={filterMainCategory}\r\n                    onChange={(e) => handleMainCategoryFilterChange(e.target.value)}\r\n                  >\r\n                    <option value=\"\">All Main Categories</option>\r\n                    {getMainCategories().map((cat) => (\r\n                      <option key={cat._id} value={cat._id}>\r\n                        {cat.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <label className=\"form-label\">\r\n                    Sub Category\r\n                    {filterSubCategory && (\r\n                      <span className=\"badge bg-info ms-2\">Active</span>\r\n                    )}\r\n                  </label>\r\n                  <select\r\n                    className=\"form-select\"\r\n                    value={filterSubCategory}\r\n                    onChange={(e) => handleSubCategoryFilterChange(e.target.value)}\r\n                  >\r\n                    <option value=\"\">All Sub Categories</option>\r\n                    {getSubCategories().map((cat) => (\r\n                      <option key={cat._id} value={cat._id}>\r\n                        {cat.name} ({findParentMainCategory(cat._id)?.name || 'Unknown Parent'})\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Sort Section */}\r\n            <div className=\"col-md-4 text-center\">\r\n              <h6 className=\"text-muted mb-3\">Sort Options</h6>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                  <label className=\"form-label\">Sort Order</label>\r\n                  <select\r\n                    className=\"form-select\"\r\n                    value={sortOrder}\r\n                    onChange={(e) => setSortOrder(e.target.value)}\r\n                  >\r\n                    <option value=\"asc\">A to Z</option>\r\n                    <option value=\"desc\">Z to A</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"row mt-3\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"d-flex gap-2\">\r\n                <button\r\n                  className=\"btn btn-outline-secondary\"\r\n                  onClick={clearAllFilters}\r\n                >\r\n                  <i className=\"fas fa-filter me-1\"></i>\r\n                  Clear All Filters\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-outline-info\"\r\n                  onClick={() => {\r\n                    setSortBy(\"name\");\r\n                    setSortOrder(\"asc\");\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-sort me-1\"></i>\r\n                  Reset Sorting\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-outline-success\"\r\n                  onClick={() => {\r\n                    setExpandedMainCategories(new Set(getMainCategories().map(cat => cat._id)));\r\n                    setExpandedSubCategories(new Set(getSubCategories().map(cat => cat._id)));\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-expand me-1\"></i>\r\n                  Expand All\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-outline-warning\"\r\n                  onClick={() => {\r\n                    setExpandedMainCategories(new Set());\r\n                    setExpandedSubCategories(new Set());\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-compress me-1\"></i>\r\n                  Collapse All\r\n                </button>\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Dropdown/Accordion Style Categories */}\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h5 className=\"mb-0 text-center\">Categories</h5>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {getFilteredMainCategories().length === 0 ? (\r\n            <div className=\"text-center text-muted py-4\">\r\n              No categories found matching the current filters.\r\n            </div>\r\n          ) : (\r\n            getFilteredMainCategories().map((mainCategory, index) => {\r\n              const subCategories = getSortedSubCategories(mainCategory._id);\r\n              const isMainExpanded = expandedMainCategories.has(mainCategory._id);\r\n\r\n              // Filter sub categories if filter is applied\r\n              const filteredSubCategories = filterSubCategory\r\n                ? subCategories.filter((sub) => sub._id === filterSubCategory)\r\n                : subCategories;\r\n\r\n              return (\r\n                <div key={mainCategory._id} className=\"mb-3\">\r\n                  {/* Main Category */}\r\n                  <div className=\"border rounded\">\r\n                    <div\r\n                      className={`p-3 d-flex justify-content-between align-items-center ${filterMainCategory === mainCategory._id\r\n                          ? 'bg-primary text-white'\r\n                          : 'bg-light'\r\n                        }`}\r\n                      style={{ cursor: \"pointer\" }}\r\n                      onClick={() => toggleMainCategory(mainCategory._id)}\r\n                    >\r\n                      <div className=\"d-flex align-items-center\">\r\n                        <i\r\n                          className={`fas ${isMainExpanded ? \"fa-chevron-down\" : \"fa-chevron-right\"\r\n                            } me-2`}\r\n                        ></i>\r\n                        <span className={`badge me-2 ${filterMainCategory === mainCategory._id\r\n                            ? 'bg-light text-primary'\r\n                            : 'bg-primary'\r\n                          }`}>Main</span>\r\n                        <strong>\r\n                          {index + 1}. {mainCategory.name}\r\n                        </strong>\r\n                        <small className={`ms-2 ${filterMainCategory === mainCategory._id\r\n                            ? 'text-light'\r\n                            : 'text-muted'\r\n                          }`}>\r\n                          ({getChildrenCount(mainCategory._id)} sub-categories)\r\n                        </small>\r\n                        {filterMainCategory === mainCategory._id && (\r\n                          <span className=\"badge bg-warning text-dark ms-2\">\r\n                            <i className=\"fas fa-filter me-1\"></i>\r\n                            Filtered\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <button\r\n                          className={`btn btn-sm me-2 ${filterMainCategory === mainCategory._id\r\n                              ? 'btn-outline-light'\r\n                              : 'btn-outline-primary'\r\n                            }`}\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            handleEdit(mainCategory);\r\n                          }}\r\n                        >\r\n                          Edit\r\n                        </button>\r\n                        <button\r\n                          className={`btn btn-sm ${filterMainCategory === mainCategory._id\r\n                              ? 'btn-outline-light'\r\n                              : 'btn-outline-danger'\r\n                            }`}\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            handleDelete(mainCategory._id);\r\n                          }}\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Sub Categories */}\r\n                    {isMainExpanded && filteredSubCategories.length > 0 && (\r\n                      <div className=\"border-top\">\r\n                        {filteredSubCategories.map((subCategory) => {\r\n                          const subSubCategories = getSortedSubSubCategories(subCategory._id);\r\n                          const isSubExpanded = expandedSubCategories.has(subCategory._id);\r\n\r\n                          return (\r\n                            <div key={subCategory._id}>\r\n                              <div\r\n                                className={`p-3 ps-5 d-flex justify-content-between align-items-center border-bottom ${filterSubCategory === subCategory._id\r\n                                    ? 'bg-info text-white'\r\n                                    : 'bg-white'\r\n                                  }`}\r\n                                style={{ cursor: \"pointer\" }}\r\n                                onClick={() => toggleSubCategory(subCategory._id)}\r\n                              >\r\n                                <div className=\"d-flex align-items-center\">\r\n                                  <span className={`badge me-2 ${filterSubCategory === subCategory._id\r\n                                      ? 'bg-light text-info'\r\n                                      : 'bg-info'\r\n                                    }`}>Sub</span>\r\n                                  <strong>{subCategory.name}</strong>\r\n                                  <small className={`ms-2 ${filterSubCategory === subCategory._id\r\n                                      ? 'text-light'\r\n                                      : 'text-muted'\r\n                                    }`}>\r\n                                    ({getChildrenCount(subCategory._id)} sub-sub categories)\r\n                                  </small>\r\n                                  {filterSubCategory === subCategory._id && (\r\n                                    <span className=\"badge bg-warning text-dark ms-2\">\r\n                                      <i className=\"fas fa-filter me-1\"></i>\r\n                                      Filtered\r\n                                    </span>\r\n                                  )}\r\n                                </div>\r\n                                <div>\r\n                                  <button\r\n                                    className={`btn btn-sm me-2 ${filterSubCategory === subCategory._id\r\n                                        ? 'btn-outline-light'\r\n                                        : 'btn-outline-primary'\r\n                                      }`}\r\n                                    onClick={(e) => {\r\n                                      e.stopPropagation();\r\n                                      handleEdit(subCategory);\r\n                                    }}\r\n                                  >\r\n                                    Edit\r\n                                  </button>\r\n                                  <button\r\n                                    className={`btn btn-sm ${filterSubCategory === subCategory._id\r\n                                        ? 'btn-outline-light'\r\n                                        : 'btn-outline-danger'\r\n                                      }`}\r\n                                    onClick={(e) => {\r\n                                      e.stopPropagation();\r\n                                      handleDelete(subCategory._id);\r\n                                    }}\r\n                                  >\r\n                                    Delete\r\n                                  </button>\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Sub-Sub Categories */}\r\n                              {isSubExpanded && subSubCategories.length > 0 && (\r\n                                <div className=\"bg-light\">\r\n                                  {subSubCategories.map((subSubCategory) => (\r\n                                    <div\r\n                                      key={subSubCategory._id}\r\n                                      className=\"p-3 ps-5 ms-4 d-flex justify-content-between align-items-center border-bottom\"\r\n                                    >\r\n                                      <div className=\"d-flex align-items-center\">\r\n                                        <span className=\"badge bg-success me-2\">Sub-Sub</span>\r\n                                        <strong>{subSubCategory.name}</strong>\r\n                                      </div>\r\n                                      <div>\r\n                                        <button\r\n                                          className=\"btn btn-sm btn-outline-primary me-2\"\r\n                                          onClick={() => handleEdit(subSubCategory)}\r\n                                        >\r\n                                          Edit\r\n                                        </button>\r\n                                        <button\r\n                                          className=\"btn btn-sm btn-outline-danger\"\r\n                                          onClick={() => handleDelete(subSubCategory._id)}\r\n                                        >\r\n                                          Delete\r\n                                        </button>\r\n                                      </div>\r\n                                    </div>\r\n                                  ))}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      {showModal && (\r\n        <div\r\n          className=\"modal show d-block\"\r\n          style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n          tabIndex=\"-1\"\r\n        >\r\n          <div className=\"modal-dialog modal-lg modal-dialog-centered\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header bg-primary text-white\">\r\n                <h5 className=\"modal-title\">\r\n                  {editingId ? \"Edit Category\" : \"Add New Category\"}\r\n                </h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn-close btn-close-white\"\r\n                  onClick={() => {\r\n                    setShowModal(false);\r\n                    resetForm();\r\n                  }}\r\n                ></button>\r\n              </div>\r\n\r\n              <div className=\"modal-body\">\r\n                {error && (\r\n                  <div className=\"alert alert-danger alert-dismissible\" role=\"alert\">\r\n                    <i className=\"fas fa-exclamation-triangle me-2\"></i>\r\n                    {error}\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn-close\"\r\n                      onClick={() => setError(\"\")}\r\n                    ></button>\r\n                  </div>\r\n                )}\r\n\r\n                <form onSubmit={handleSubmit}>\r\n                  {/* Category Type Selection */}\r\n                  <div className=\"row mb-4\">\r\n                    <div className=\"col-md-6\">\r\n                      <label className=\"form-label fw-bold\">\r\n                        <i className=\"fas fa-layer-group me-2\"></i>\r\n                        Category Type\r\n                      </label>\r\n                      <select\r\n                        className=\"form-select form-select-lg\"\r\n                        value={categoryType}\r\n                        onChange={(e) => {\r\n                          setCategoryType(e.target.value);\r\n                          setSelectedMainCategory(null);\r\n                          setSelectedSubCategory(null);\r\n                          setParentId(null);\r\n                        }}\r\n                        disabled={editingId}\r\n                      >\r\n                        <option value=\"main\">\r\n                          🏠 Main Category (Level 1)\r\n                        </option>\r\n                        <option value=\"sub\">\r\n                          📁 Sub Category (Level 2)\r\n                        </option>\r\n                        <option value=\"sub-sub\">\r\n                          📄 Sub-Sub Category (Level 3)\r\n                        </option>\r\n                      </select>\r\n                      {editingId && (\r\n                        <small className=\"text-muted\">\r\n                          <i className=\"fas fa-info-circle me-1\"></i>\r\n                          Category type cannot be changed when editing\r\n                        </small>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <label className=\"form-label fw-bold\">\r\n                        <i className=\"fas fa-toggle-on me-2\"></i>\r\n                        Status\r\n                      </label>\r\n                      <div className=\"form-check form-switch mt-2\">\r\n                        <input\r\n                          className=\"form-check-input\"\r\n                          type=\"checkbox\"\r\n                          id=\"isActiveSwitch\"\r\n                          checked={isActive}\r\n                          onChange={(e) => setIsActive(e.target.checked)}\r\n                        />\r\n                        <label className=\"form-check-label\" htmlFor=\"isActiveSwitch\">\r\n                          <span className={`badge ${isActive ? 'bg-success' : 'bg-secondary'}`}>\r\n                            {isActive ? 'Active' : 'Inactive'}\r\n                          </span>\r\n                        </label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Parent Category Selection */}\r\n                  {categoryType !== \"main\" && (\r\n                    <div className=\"card mb-4\">\r\n                      <div className=\"card-header bg-light\">\r\n                        <h6 className=\"mb-0\">\r\n                          <i className=\"fas fa-sitemap me-2\"></i>\r\n                          Parent Category Selection\r\n                        </h6>\r\n                      </div>\r\n                      <div className=\"card-body\">\r\n                        <div className=\"row\">\r\n                          <div className=\"col-md-6\">\r\n                            <label className=\"form-label fw-bold\">\r\n                              <i className=\"fas fa-home me-2\"></i>\r\n                              Main Category *\r\n                            </label>\r\n                            <select\r\n                              className=\"form-select\"\r\n                              value={selectedMainCategory || \"\"}\r\n                              onChange={(e) =>\r\n                                handleMainCategoryChange(\r\n                                  e.target.value ? e.target.value : null\r\n                                )\r\n                              }\r\n                              required\r\n                            >\r\n                              <option value=\"\">-- Select Main Category --</option>\r\n                              {getMainCategories().map((cat) => (\r\n                                <option key={cat._id} value={cat._id}>\r\n                                  🏠 {cat.name} ({getChildrenCount(cat._id)} sub-categories)\r\n                                </option>\r\n                              ))}\r\n                            </select>\r\n                          </div>\r\n\r\n                          {categoryType === \"sub-sub\" && (\r\n                            <div className=\"col-md-6\">\r\n                              <label className=\"form-label fw-bold\">\r\n                                <i className=\"fas fa-folder me-2\"></i>\r\n                                Sub Category *\r\n                              </label>\r\n                              <select\r\n                                className=\"form-select\"\r\n                                value={selectedSubCategory || \"\"}\r\n                                onChange={(e) =>\r\n                                  handleSubCategoryChange(\r\n                                    e.target.value ? e.target.value : null\r\n                                  )\r\n                                }\r\n                                disabled={!selectedMainCategory}\r\n                                required\r\n                              >\r\n                                <option value=\"\">-- Select Sub Category --</option>\r\n                                {selectedMainCategory &&\r\n                                  getSubCategories(selectedMainCategory).map((cat) => (\r\n                                    <option key={cat._id} value={cat._id}>\r\n                                      📁 {cat.name} ({getChildrenCount(cat._id)} sub-sub categories)\r\n                                    </option>\r\n                                  ))}\r\n                              </select>\r\n                              {!selectedMainCategory && (\r\n                                <small className=\"text-muted\">\r\n                                  Please select a main category first\r\n                                </small>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Category Name Input */}\r\n                  <div className=\"mb-4\">\r\n                    <label className=\"form-label fw-bold\">\r\n                      <i className=\"fas fa-tag me-2\"></i>\r\n                      Category Name *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"form-control form-control-lg\"\r\n                      value={name}\r\n                      onChange={(e) => setName(e.target.value)}\r\n                      placeholder=\"Enter category name...\"\r\n                      required\r\n                      maxLength={100}\r\n                    />\r\n                    <div className=\"form-text\">\r\n                      {name.length}/100 characters\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Live Preview Section */}\r\n                  {name && (\r\n                    <div className=\"card mb-4\">\r\n                      <div className=\"card-header bg-info text-white\">\r\n                        <h6 className=\"mb-0\">\r\n                          <i className=\"fas fa-eye me-2\"></i>\r\n                          Live Preview\r\n                        </h6>\r\n                      </div>\r\n                      <div className=\"card-body\">\r\n                        <div className=\"row\">\r\n                          <div className=\"col-md-8\">\r\n                            <strong>Category Path:</strong>\r\n                            <div className=\"mt-2\">\r\n                              <span className=\"badge bg-secondary me-1\">Path:</span>\r\n                              {categoryType === \"main\" ? (\r\n                                <span className=\"badge bg-primary fs-6\">{name}</span>\r\n                              ) : categoryType === \"sub\" && selectedMainCategory ? (\r\n                                <>\r\n                                  <span className=\"badge bg-primary me-1\">\r\n                                    {categories.find((cat) => cat._id === selectedMainCategory)?.name}\r\n                                  </span>\r\n                                  <i className=\"fas fa-chevron-right mx-2\"></i>\r\n                                  <span className=\"badge bg-info fs-6\">{name}</span>\r\n                                </>\r\n                              ) : categoryType === \"sub-sub\" && selectedMainCategory && selectedSubCategory ? (\r\n                                <>\r\n                                  <span className=\"badge bg-primary me-1\">\r\n                                    {categories.find((cat) => cat._id === selectedMainCategory)?.name}\r\n                                  </span>\r\n                                  <i className=\"fas fa-chevron-right mx-2\"></i>\r\n                                  <span className=\"badge bg-info me-1\">\r\n                                    {categories.find((cat) => cat._id === selectedSubCategory)?.name}\r\n                                  </span>\r\n                                  <i className=\"fas fa-chevron-right mx-2\"></i>\r\n                                  <span className=\"badge bg-success fs-6\">{name}</span>\r\n                                </>\r\n                              ) : (\r\n                                <span className=\"text-warning\">\r\n                                  <i className=\"fas fa-exclamation-triangle me-1\"></i>\r\n                                  Please select all required parent categories\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"col-md-4 text-end\">\r\n                            <div className=\"mb-2\">\r\n                              <span className=\"badge bg-light text-dark\">\r\n                                Level: {getCategoryLevel(categoryType)}\r\n                              </span>\r\n                            </div>\r\n                            <div>\r\n                              <span className={`badge ${isActive ? 'bg-success' : 'bg-secondary'}`}>\r\n                                {isActive ? 'Active' : 'Inactive'}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Form Actions */}\r\n                  <div className=\"modal-footer bg-light\">\r\n                    <div className=\"d-flex justify-content-between w-100\">\r\n                      <div>\r\n                        {editingId && (\r\n                          <small className=\"text-muted\">\r\n                            <i className=\"fas fa-info-circle me-1\"></i>\r\n                            Editing existing category\r\n                          </small>\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-secondary me-2\"\r\n                          onClick={() => {\r\n                            setShowModal(false);\r\n                            resetForm();\r\n                          }}\r\n                          disabled={isSubmitting}\r\n                        >\r\n                          <i className=\"fas fa-times me-1\"></i>\r\n                          Cancel\r\n                        </button>\r\n                        <button\r\n                          type=\"submit\"\r\n                          className=\"btn btn-primary\"\r\n                          disabled={isSubmitting || !name.trim()}\r\n                        >\r\n                          {isSubmitting ? (\r\n                            <>\r\n                              <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                              {editingId ? \"Updating...\" : \"Saving...\"}\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <i className={`fas ${editingId ? 'fa-save' : 'fa-plus'} me-1`}></i>\r\n                              {editingId ? \"Update Category\" : \"Save Category\"}\r\n                            </>\r\n                          )}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Loading Overlay */}\r\n      {isSubmitting && (\r\n        <div className=\"position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center\"\r\n          style={{ backgroundColor: \"rgba(0,0,0,0.3)\", zIndex: 9999 }}>\r\n          <div className=\"card\">\r\n            <div className=\"card-body text-center\">\r\n              <div className=\"spinner-border text-primary mb-3\" role=\"status\">\r\n                <span className=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n              <h6>{editingId ? \"Updating category...\" : \"Adding category...\"}</h6>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageCategories;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}