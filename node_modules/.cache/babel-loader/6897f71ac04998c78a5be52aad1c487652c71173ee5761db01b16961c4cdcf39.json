{"ast":null,"code":"import _objectSpread from\"D:/Edu Project/admin-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ManageOrders=()=>{const[orders,setOrders]=useState([]);const[filteredOrders,setFilteredOrders]=useState([]);const[statusFilter,setStatusFilter]=useState('all');const[searchTerm,setSearchTerm]=useState('');const[selectedOrder,setSelectedOrder]=useState(null);const[showModal,setShowModal]=useState(false);const[showRefundModal,setShowRefundModal]=useState(false);const[refundReason,setRefundReason]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[pagination,setPagination]=useState({current:1,pages:1,total:0});const modalRef=useRef(null);const refundModalRef=useRef(null);// API base URL - adjust according to your setup\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Fetch orders from backend\nconst fetchOrders=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;try{setLoading(true);setError(null);// Get token from localStorage or wherever you store it\nconst token=localStorage.getItem('token')||localStorage.getItem('adminToken');if(!token){throw new Error('Authentication token not found');}const response=await axios.get(\"\".concat(API_BASE_URL,\"/orders/admin\"),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},params:{page,limit,status:statusFilter!=='all'?statusFilter:undefined,search:searchTerm||undefined}});if(response.data.success){const ordersData=response.data.orders.map(order=>{// Safely extract customer info\nconst customerInfo=order.customerInfo||{};const user=order.user||{};// Build student name with proper null checking\nlet studentName='N/A';if(customerInfo.firstName||customerInfo.lastName){studentName=\"\".concat(customerInfo.firstName||'',\" \").concat(customerInfo.lastName||'').trim();}else if(user.firstName||user.lastName){studentName=\"\".concat(user.firstName||'',\" \").concat(user.lastName||'').trim();}else if(user.username){studentName=user.username;}// Safely extract email\nconst email=customerInfo.email||user.email||'N/A';// Safely extract course information\nconst course=order.items&&Array.isArray(order.items)?order.items.map(item=>{var _item$course;return((_item$course=item.course)===null||_item$course===void 0?void 0:_item$course.title)||'Unknown Course';}).join(', '):'N/A';// Safely extract pricing information\nconst pricing=order.pricing||{};const payment=order.payment||{};return{id:order._id,orderNumber:order.orderNumber,studentName,email,course,orderDate:new Date(order.createdAt).toISOString().split('T')[0],amount:pricing.total||0,status:order.status,paymentMethod:payment.method||'N/A',phone:customerInfo.phone||'N/A',lastUpdated:order.updatedAt,// Additional backend data\npaymentStatus:payment.status,subtotal:pricing.subtotal||0,tax:pricing.tax||0,shipping:pricing.shipping||0,items:order.items||[],customerInfo:customerInfo,rawOrder:order// Keep full order data for detailed view\n};});setOrders(ordersData);setFilteredOrders(ordersData);if(response.data.pagination){setPagination(response.data.pagination);}}else{throw new Error(response.data.message||'Failed to fetch orders');}}catch(error){var _error$response,_error$response$data,_error$response2;console.error('Error fetching orders:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||'Failed to fetch orders');// If it's an auth error, redirect to login\nif(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===401){localStorage.removeItem('token');localStorage.removeItem('adminToken');window.location.href='/admin/login';}}finally{setLoading(false);}};// Update order status on backend\nconst updateOrderStatusOnBackend=async function(orderId,newStatus){let refundReason=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;try{const token=localStorage.getItem('token')||localStorage.getItem('adminToken');if(!token){throw new Error('Authentication token not found');}const response=await axios.put(\"\".concat(API_BASE_URL,\"/orders/admin/\").concat(orderId,\"/status\"),{status:newStatus,refundReason:refundReason},{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(response.data.success){return response.data.order;}else{throw new Error(response.data.message||'Failed to update order status');}}catch(error){console.error('Error updating order status:',error);throw error;}};// Initial fetch\nuseEffect(()=>{fetchOrders();},[]);// Filter orders when statusFilter or searchTerm changes\nuseEffect(()=>{// If we're using backend filtering, refetch data\n// Otherwise, filter locally\nif(statusFilter!=='all'||searchTerm){// Debounce search to avoid too many API calls\nconst timeoutId=setTimeout(()=>{fetchOrders(1);// Reset to page 1 when filtering\n},500);return()=>clearTimeout(timeoutId);}else{fetchOrders(1);}},[statusFilter,searchTerm]);// Local filtering (if you prefer client-side filtering)\nconst filterOrdersLocally=()=>{let filtered=orders;if(statusFilter!=='all'){filtered=filtered.filter(order=>order.status===statusFilter);}if(searchTerm){const searchLower=searchTerm.toLowerCase();filtered=filtered.filter(order=>{var _order$orderNumber;return order.id.toLowerCase().includes(searchLower)||((_order$orderNumber=order.orderNumber)===null||_order$orderNumber===void 0?void 0:_order$orderNumber.toLowerCase().includes(searchLower))||order.studentName.toLowerCase().includes(searchLower)||order.course.toLowerCase().includes(searchLower)||order.email.toLowerCase().includes(searchLower);});}setFilteredOrders(filtered);};const getStatusBadge=status=>{const statusClasses={pending:'bg-warning',confirmed:'bg-info',processing:'bg-info',completed:'bg-success',cancelled:'bg-danger',refunded:'bg-secondary'};return statusClasses[status]||'bg-secondary';};const getAvailableActions=(status,paymentStatus)=>{const actions=[];switch(status){case'pending':actions.push({action:'confirmed',label:'Confirm Order',className:'dropdown-item'},{action:'cancelled',label:'Cancel Order',className:'dropdown-item text-danger'});break;case'confirmed':actions.push({action:'processing',label:'Mark Processing',className:'dropdown-item'},{action:'completed',label:'Mark Completed',className:'dropdown-item'},{action:'cancelled',label:'Cancel Order',className:'dropdown-item text-danger'});break;case'processing':actions.push({action:'completed',label:'Mark Completed',className:'dropdown-item'},{action:'cancelled',label:'Cancel Order',className:'dropdown-item text-danger'});break;case'completed':if(paymentStatus==='completed'){actions.push({action:'refund',label:'Issue Refund',className:'dropdown-item text-warning'});}actions.push({action:'download',label:'Download Receipt',className:'dropdown-item'});break;case'cancelled':if(paymentStatus!=='completed'){actions.push({action:'pending',label:'Reactivate Order',className:'dropdown-item text-success'});}break;case'refunded':actions.push({action:'download',label:'Download Receipt',className:'dropdown-item'});break;}return actions;};const updateOrderStatus=async(orderId,newStatus)=>{try{setLoading(true);// Update on backend\nconst updatedOrder=await updateOrderStatusOnBackend(orderId,newStatus);// Update local state\nsetOrders(prevOrders=>prevOrders.map(order=>order.id===orderId?_objectSpread(_objectSpread({},order),{},{status:newStatus,lastUpdated:new Date().toISOString()}):order));setShowModal(false);// Show success message\nalert(\"Order \".concat(orderId,\" status updated to \").concat(newStatus));}catch(error){alert(\"Failed to update order status: \".concat(error.message));}finally{setLoading(false);}};const generateReceiptHTML=order=>{var _order$items;return\"\\n        <!DOCTYPE html>\\n        <html>\\n        <head>\\n            <title>Receipt - \".concat(order.orderNumber||order.id,\"</title>\\n            <style>\\n                body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }\\n                .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }\\n                .order-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }\\n                .table { width: 100%; border-collapse: collapse; margin: 20px 0; }\\n                .table th, .table td { border: 1px solid #ddd; padding: 12px; text-align: left; }\\n                .table th { background-color: #f8f9fa; }\\n                .pricing { margin-top: 20px; }\\n                .pricing-row { display: flex; justify-content: space-between; padding: 5px 0; }\\n                .total { font-size: 1.2em; font-weight: bold; border-top: 2px solid #333; padding-top: 10px; }\\n                .footer { margin-top: 40px; text-align: center; color: #666; font-size: 0.9em; }\\n            </style>\\n        </head>\\n        <body>\\n            <div class=\\\"header\\\">\\n                <h1>Course Order Receipt</h1>\\n                <p>Thank you for your purchase!</p>\\n            </div>\\n            \\n            <div class=\\\"order-info\\\">\\n                <div>\\n                    <h3>Order Details</h3>\\n                    <p><strong>Order ID:</strong> \").concat(order.orderNumber||order.id,\"</p>\\n                    <p><strong>Date:</strong> \").concat(new Date(order.orderDate).toLocaleDateString(),\"</p>\\n                    <p><strong>Status:</strong> \").concat(order.status.charAt(0).toUpperCase()+order.status.slice(1),\"</p>\\n                    <p><strong>Payment Status:</strong> \").concat((order.paymentStatus||'').charAt(0).toUpperCase()+(order.paymentStatus||'').slice(1),\"</p>\\n                </div>\\n                <div>\\n                    <h3>Student Information</h3>\\n                    <p><strong>Name:</strong> \").concat(order.studentName,\"</p>\\n                    <p><strong>Email:</strong> \").concat(order.email,\"</p>\\n                    <p><strong>Phone:</strong> \").concat(order.phone,\"</p>\\n                </div>\\n            </div>\\n            \\n            <h3>Courses Purchased</h3>\\n            <table class=\\\"table\\\">\\n                <thead>\\n                    <tr>\\n                        <th>Course</th>\\n                        <th>Quantity</th>\\n                        <th>Price</th>\\n                        <th>Total</th>\\n                    </tr>\\n                </thead>\\n                <tbody>\\n                    \").concat(((_order$items=order.items)===null||_order$items===void 0?void 0:_order$items.map(item=>{var _item$course2;return\"\\n                        <tr>\\n                            <td>\".concat(((_item$course2=item.course)===null||_item$course2===void 0?void 0:_item$course2.title)||'Unknown Course',\"</td>\\n                            <td>\").concat(item.quantity||1,\"</td>\\n                            <td>\\u20B9\").concat(item.price||0,\"</td>\\n                            <td>\\u20B9\").concat((item.price||0)*(item.quantity||1),\"</td>\\n                        </tr>\\n                    \");}).join(''))||\"\\n                        <tr>\\n                            <td colspan=\\\"4\\\">No course details available</td>\\n                        </tr>\\n                    \",\"\\n                </tbody>\\n            </table>\\n            \\n            <div class=\\\"pricing\\\">\\n                <div class=\\\"pricing-row\\\">\\n                    <span>Subtotal:</span>\\n                    <span>\\u20B9\").concat(order.subtotal||0,\"</span>\\n                </div>\\n                \").concat(order.shipping>0?\"\\n                <div class=\\\"pricing-row\\\">\\n                    <span>Shipping:</span>\\n                    <span>\\u20B9\".concat(order.shipping,\"</span>\\n                </div>\\n                \"):'',\"\\n                \").concat(order.tax>0?\"\\n                <div class=\\\"pricing-row\\\">\\n                    <span>Tax (GST):</span>\\n                    <span>\\u20B9\".concat(order.tax,\"</span>\\n                </div>\\n                \"):'',\"\\n                <div class=\\\"pricing-row total\\\">\\n                    <span>Total Amount:</span>\\n                    <span>\\u20B9\").concat(order.amount,\"</span>\\n                </div>\\n            </div>\\n            \\n            <div class=\\\"footer\\\">\\n                <p>Generated on \").concat(new Date().toLocaleString(),\"</p>\\n                <p>This is an automatically generated receipt.</p>\\n                <p>Payment Method: \").concat(order.paymentMethod,\"</p>\\n            </div>\\n        </body>\\n        </html>\\n        \");};const downloadReceipt=order=>{const receiptHTML=generateReceiptHTML(order);const blob=new Blob([receiptHTML],{type:'text/html'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"receipt-\".concat(order.orderNumber||order.id,\".html\");document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);};const handleActionClick=(orderId,action)=>{const order=orders.find(o=>o.id===orderId);switch(action){case'refund':setSelectedOrder(order);setShowRefundModal(true);break;case'download':if(order){downloadReceipt(order);}break;default:updateOrderStatus(orderId,action);}};const handleRefund=async()=>{if(selectedOrder&&refundReason.trim()){try{await updateOrderStatusOnBackend(selectedOrder.id,'refunded',refundReason);updateOrderStatus(selectedOrder.id,'refunded');setShowRefundModal(false);setRefundReason('');alert(\"Refund processed for \".concat(selectedOrder.orderNumber||selectedOrder.id,\". Reason: \").concat(refundReason));}catch(error){alert(\"Failed to process refund: \".concat(error.message));}}};const handleViewOrder=order=>{setSelectedOrder(order);setShowModal(true);};const closeModal=()=>{setShowModal(false);setSelectedOrder(null);};const closeRefundModal=()=>{setShowRefundModal(false);setRefundReason('');setSelectedOrder(null);};const handleModalBackdropClick=e=>{if(e.target===e.currentTarget){closeModal();}};const handleRefundModalBackdropClick=e=>{if(e.target===e.currentTarget){closeRefundModal();}};const getOrderStats=()=>{const stats={total:orders.length,completed:orders.filter(o=>o.status==='completed').length,pending:orders.filter(o=>o.status==='pending').length,confirmed:orders.filter(o=>o.status==='confirmed').length,processing:orders.filter(o=>o.status==='processing').length,cancelled:orders.filter(o=>o.status==='cancelled').length,refunded:orders.filter(o=>o.status==='refunded').length};return stats;};const exportOrdersToCSV=()=>{const headers=['Order Number','Order ID','Student Name','Email','Course','Order Date','Amount','Status','Payment Status','Payment Method','Phone','Last Updated'];const csvContent=[headers.join(','),...filteredOrders.map(order=>[order.orderNumber||order.id,order.id,\"\\\"\".concat(order.studentName,\"\\\"\"),order.email,\"\\\"\".concat(order.course,\"\\\"\"),order.orderDate,order.amount,order.status,order.paymentStatus||'',order.paymentMethod,order.phone,order.lastUpdated].join(','))].join('\\n');const blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"orders-export-\".concat(new Date().toISOString().split('T')[0],\".csv\");document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);};// Calculate stats\nconst stats=getOrderStats();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",href:\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css\"}),/*#__PURE__*/_jsx(\"link\",{href:\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css\",rel:\"stylesheet\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"h3 mb-1 text-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-cart-check me-2\"}),\"Order Management\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-3 mb-md-0\",children:\"Manage and track all course orders efficiently\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-success\",onClick:exportOrdersToCSV,title:\"Export orders to CSV\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download me-2\"}),\"Export CSV\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-info\",onClick:()=>fetchOrders(),disabled:loading,title:\"Refresh orders\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi \".concat(loading?'bi-arrow-repeat spinner-border spinner-border-sm':'bi-arrow-clockwise',\" me-2\")}),\"Refresh\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-circle me-2\"}),\"Manual Order\"]})]})]})})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger alert-dismissible fade show\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setError(null),\"aria-label\":\"Close\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Total Orders\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.total})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-cart3 fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.completed})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-circle fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.pending})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Processing\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.processing})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-repeat fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.cancelled})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-circle fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Refunded\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.refunded})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left-circle fs-2 opacity-75\"})]})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-light\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-funnel me-2\"}),\"Filters & Search\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6 col-lg-5\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label fw-semibold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-search me-1\"}),\"Search Orders\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text bg-light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-search text-muted\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search by Order ID, Student, Email, or Course\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary\",onClick:()=>setSearchTerm(''),title:\"Clear search\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6 col-lg-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label fw-semibold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-filter me-1\"}),\"Filter by Status\"]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:statusFilter,onChange:e=>setStatusFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"confirmed\",children:\"Confirmed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"processing\",children:\"Processing\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"refunded\",children:\"Refunded\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4 d-flex align-items-end\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2 w-100\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary flex-grow-1\",onClick:()=>{setSearchTerm('');setStatusFilter('all');},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-clockwise me-2\"}),\"Reset Filters\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info\",onClick:()=>fetchOrders(),disabled:loading,title:\"Apply filters\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi \".concat(loading?'bi-arrow-repeat spinner-border spinner-border-sm':'bi-check2')})})]})})]})})]})})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-muted\",children:\"Loading orders...\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header bg-light d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-table me-2\"}),\"Orders (\",filteredOrders.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex gap-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-primary\",children:[\"Showing \",filteredOrders.length,\" of \",pagination.total||orders.length]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Student\"}),/*#__PURE__*/_jsx(\"th\",{className:\"d-none d-md-table-cell\",children:\"Course\"}),/*#__PURE__*/_jsx(\"th\",{className:\"d-none d-lg-table-cell\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredOrders.map((order,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"align-middle\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center text-muted fw-semibold\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-primary\",children:order.orderNumber||order.id}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:order.id})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-semibold\",children:order.studentName}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:order.email}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block d-md-none\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-book me-1\"}),order.course]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"d-none d-md-table-cell\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-truncate\",style:{maxWidth:'200px'},title:order.course,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-book text-muted me-1\"}),order.course]})}),/*#__PURE__*/_jsx(\"td\",{className:\"d-none d-lg-table-cell\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:new Date(order.orderDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:new Date(order.orderDate).toLocaleTimeString()})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"strong\",{className:\"text-success\",children:[\"\\u20B9\",order.amount]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:order.paymentMethod})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge \".concat(getStatusBadge(order.status),\" fs-6 px-3 py-2\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-circle-fill me-1\",style:{fontSize:'0.5rem'}}),order.status.charAt(0).toUpperCase()+order.status.slice(1)]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1 justify-content-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary\",onClick:()=>handleViewOrder(order),title:\"View order details\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye\"})}),getAvailableActions(order.status,order.paymentStatus).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-secondary dropdown-toggle\",type:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\",title:\"More actions\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-three-dots-vertical\"})}),/*#__PURE__*/_jsx(\"ul\",{className:\"dropdown-menu\",children:getAvailableActions(order.status,order.paymentStatus).map((actionItem,idx)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{className:actionItem.className,onClick:()=>handleActionClick(order.id,actionItem.action),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi \".concat(actionItem.action==='confirmed'?'bi-check-circle':actionItem.action==='processing'?'bi-arrow-repeat':actionItem.action==='completed'?'bi-check-circle-fill':actionItem.action==='cancelled'?'bi-x-circle':actionItem.action==='refund'?'bi-arrow-left-circle':actionItem.action==='download'?'bi-download':'bi-arrow-right',\" me-2\")}),actionItem.label]})},idx))})]})]})})]},order.id))})]})}),!loading&&filteredOrders.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-inbox display-1 text-muted\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"mt-3 text-muted\",children:\"No orders found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:searchTerm||statusFilter!=='all'?'Try adjusting your search criteria or filters':'No orders have been placed yet'}),(searchTerm||statusFilter!=='all')&&/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary\",onClick:()=>{setSearchTerm('');setStatusFilter('all');},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-clockwise me-2\"}),\"Clear Filters\"]})]})]})]})})}),pagination.pages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"row mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Orders pagination\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"pagination justify-content-center\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"page-item \".concat(pagination.current===1?'disabled':''),children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>fetchOrders(pagination.current-1),disabled:pagination.current===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-left\"})})}),[...Array(pagination.pages)].map((_,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"page-item \".concat(pagination.current===index+1?'active':''),children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>fetchOrders(index+1),children:index+1})},index+1)),/*#__PURE__*/_jsx(\"li\",{className:\"page-item \".concat(pagination.current===pagination.pages?'disabled':''),children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>fetchOrders(pagination.current+1),disabled:pagination.current===pagination.pages,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-right\"})})})]})})})}),showModal&&selectedOrder&&/*#__PURE__*/_jsx(\"div\",{className:\"modal d-block\",tabIndex:\"-1\",style:{backgroundColor:'rgba(0,0,0,0.5)'},onClick:handleModalBackdropClick,ref:modalRef,children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg modal-dialog-scrollable\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header bg-primary text-white\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-receipt me-2\"}),\"Order Details - \",selectedOrder.orderNumber||selectedOrder.id]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close btn-close-white\",onClick:closeModal})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-light\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person me-2\"}),\"Student Information\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",selectedOrder.studentName]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(selectedOrder.email),className:\"text-decoration-none ms-1\",children:selectedOrder.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),/*#__PURE__*/_jsx(\"a\",{href:\"tel:\".concat(selectedOrder.phone),className:\"text-decoration-none ms-1\",children:selectedOrder.phone})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-light\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-info-circle me-2\"}),\"Order Information\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Order ID:\"}),\" \",selectedOrder.id]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Order Number:\"}),\" \",selectedOrder.orderNumber||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(selectedOrder.orderDate).toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Updated:\"}),\" \",new Date(selectedOrder.lastUpdated).toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getStatusBadge(selectedOrder.status),\" ms-2\"),children:selectedOrder.status.charAt(0).toUpperCase()+selectedOrder.status.slice(1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Payment Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(selectedOrder.paymentStatus==='completed'?'bg-success':'bg-warning',\" ms-2\"),children:selectedOrder.paymentStatus||'N/A'})]})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-light\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-book me-2\"}),\"Course Details\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title text-primary\",children:selectedOrder.course}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Subtotal:\"}),\" \\u20B9\",selectedOrder.subtotal||selectedOrder.amount]}),selectedOrder.tax>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tax (GST):\"}),\" \\u20B9\",selectedOrder.tax]}),selectedOrder.shipping>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Shipping:\"}),\" \\u20B9\",selectedOrder.shipping]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-success\",children:\"Total Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-success fw-bold ms-1\",children:[\"\\u20B9\",selectedOrder.amount]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Payment Method:\"}),\" \",selectedOrder.paymentMethod]}),selectedOrder.items&&selectedOrder.items.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Items:\"}),\" \",selectedOrder.items.length]})]})]})]})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:closeModal,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x me-2\"}),\"Close\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",children:getAvailableActions(selectedOrder.status,selectedOrder.paymentStatus).map((actionItem,index)=>/*#__PURE__*/_jsxs(\"button\",{className:\"btn \".concat(actionItem.action==='refund'?'btn-warning':actionItem.action==='pending'?'btn-success':actionItem.action==='completed'?'btn-success':actionItem.action==='cancelled'?'btn-danger':actionItem.action==='download'?'btn-info':'btn-primary'),onClick:()=>handleActionClick(selectedOrder.id,actionItem.action),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi \".concat(actionItem.action==='confirmed'?'bi-check-circle':actionItem.action==='processing'?'bi-arrow-repeat':actionItem.action==='completed'?'bi-check-circle-fill':actionItem.action==='cancelled'?'bi-x-circle':actionItem.action==='refund'?'bi-arrow-left-circle':actionItem.action==='download'?'bi-download':'bi-arrow-right',\" me-2\")}),actionItem.label]},index))})]})]})})}),showRefundModal&&selectedOrder&&/*#__PURE__*/_jsx(\"div\",{className:\"modal d-block\",tabIndex:\"-1\",style:{backgroundColor:'rgba(0,0,0,0.5)'},onClick:handleRefundModalBackdropClick,ref:refundModalRef,children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header bg-warning text-dark\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),\"Issue Refund\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:closeRefundModal})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),\"You are about to issue a refund for order \",selectedOrder.id,\" of $\",selectedOrder.amount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Refund Reason\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",rows:\"3\",placeholder:\"Enter reason for refund...\",value:refundReason,onChange:e=>setRefundReason(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:closeRefundModal,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-warning\",onClick:handleRefund,disabled:!refundReason.trim(),children:\"Issue Refund\"})]})]})})})]})]});};export default ManageOrders;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ManageOrders","orders","setOrders","filteredOrders","setFilteredOrders","statusFilter","setStatusFilter","searchTerm","setSearchTerm","selectedOrder","setSelectedOrder","showModal","setShowModal","showRefundModal","setShowRefundModal","refundReason","setRefundReason","loading","setLoading","error","setError","pagination","setPagination","current","pages","total","modalRef","refundModalRef","API_BASE_URL","process","env","REACT_APP_API_URL","fetchOrders","page","arguments","length","undefined","limit","token","localStorage","getItem","Error","response","get","concat","headers","params","status","search","data","success","ordersData","map","order","customerInfo","user","studentName","firstName","lastName","trim","username","email","course","items","Array","isArray","item","_item$course","title","join","pricing","payment","id","_id","orderNumber","orderDate","Date","createdAt","toISOString","split","amount","paymentMethod","method","phone","lastUpdated","updatedAt","paymentStatus","subtotal","tax","shipping","rawOrder","message","_error$response","_error$response$data","_error$response2","console","removeItem","window","location","href","updateOrderStatusOnBackend","orderId","newStatus","put","timeoutId","setTimeout","clearTimeout","filterOrdersLocally","filtered","filter","searchLower","toLowerCase","_order$orderNumber","includes","getStatusBadge","statusClasses","pending","confirmed","processing","completed","cancelled","refunded","getAvailableActions","actions","push","action","label","className","updateOrderStatus","updatedOrder","prevOrders","_objectSpread","alert","generateReceiptHTML","_order$items","toLocaleDateString","charAt","toUpperCase","slice","_item$course2","quantity","price","toLocaleString","downloadReceipt","receiptHTML","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","handleActionClick","find","o","handleRefund","handleViewOrder","closeModal","closeRefundModal","handleModalBackdropClick","e","target","currentTarget","handleRefundModalBackdropClick","getOrderStats","stats","exportOrdersToCSV","csvContent","children","rel","onClick","disabled","role","style","background","placeholder","value","onChange","index","maxWidth","toLocaleTimeString","fontSize","actionItem","idx","_","tabIndex","backgroundColor","ref","rows"],"sources":["D:/Edu Project/admin-frontend/src/pages/ManageOrders.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ManageOrders = () => {\r\n    const [orders, setOrders] = useState([]);\r\n    const [filteredOrders, setFilteredOrders] = useState([]);\r\n    const [statusFilter, setStatusFilter] = useState('all');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedOrder, setSelectedOrder] = useState(null);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [showRefundModal, setShowRefundModal] = useState(false);\r\n    const [refundReason, setRefundReason] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [pagination, setPagination] = useState({ current: 1, pages: 1, total: 0 });\r\n    const modalRef = useRef(null);\r\n    const refundModalRef = useRef(null);\r\n\r\n    // API base URL - adjust according to your setup\r\n    const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n    // Fetch orders from backend\r\n    const fetchOrders = async (page = 1, limit = 10) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            // Get token from localStorage or wherever you store it\r\n            const token = localStorage.getItem('token') || localStorage.getItem('adminToken');\r\n\r\n            if (!token) {\r\n                throw new Error('Authentication token not found');\r\n            }\r\n\r\n            const response = await axios.get(`${API_BASE_URL}/orders/admin`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                params: {\r\n                    page,\r\n                    limit,\r\n                    status: statusFilter !== 'all' ? statusFilter : undefined,\r\n                    search: searchTerm || undefined\r\n                }\r\n            });\r\n\r\n            if (response.data.success) {\r\n                const ordersData = response.data.orders.map(order => {\r\n                    // Safely extract customer info\r\n                    const customerInfo = order.customerInfo || {};\r\n                    const user = order.user || {};\r\n                    \r\n                    // Build student name with proper null checking\r\n                    let studentName = 'N/A';\r\n                    if (customerInfo.firstName || customerInfo.lastName) {\r\n                        studentName = `${customerInfo.firstName || ''} ${customerInfo.lastName || ''}`.trim();\r\n                    } else if (user.firstName || user.lastName) {\r\n                        studentName = `${user.firstName || ''} ${user.lastName || ''}`.trim();\r\n                    } else if (user.username) {\r\n                        studentName = user.username;\r\n                    }\r\n                    \r\n                    // Safely extract email\r\n                    const email = customerInfo.email || user.email || 'N/A';\r\n                    \r\n                    // Safely extract course information\r\n                    const course = order.items && Array.isArray(order.items) \r\n                        ? order.items.map(item => item.course?.title || 'Unknown Course').join(', ') \r\n                        : 'N/A';\r\n                    \r\n                    // Safely extract pricing information\r\n                    const pricing = order.pricing || {};\r\n                    const payment = order.payment || {};\r\n                    \r\n                    return {\r\n                        id: order._id,\r\n                        orderNumber: order.orderNumber,\r\n                        studentName,\r\n                        email,\r\n                        course,\r\n                        orderDate: new Date(order.createdAt).toISOString().split('T')[0],\r\n                        amount: pricing.total || 0,\r\n                        status: order.status,\r\n                        paymentMethod: payment.method || 'N/A',\r\n                        phone: customerInfo.phone || 'N/A',\r\n                        lastUpdated: order.updatedAt,\r\n                        // Additional backend data\r\n                        paymentStatus: payment.status,\r\n                        subtotal: pricing.subtotal || 0,\r\n                        tax: pricing.tax || 0,\r\n                        shipping: pricing.shipping || 0,\r\n                        items: order.items || [],\r\n                        customerInfo: customerInfo,\r\n                        rawOrder: order // Keep full order data for detailed view\r\n                    };\r\n                });\r\n\r\n                setOrders(ordersData);\r\n                setFilteredOrders(ordersData);\r\n\r\n                if (response.data.pagination) {\r\n                    setPagination(response.data.pagination);\r\n                }\r\n            } else {\r\n                throw new Error(response.data.message || 'Failed to fetch orders');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching orders:', error);\r\n            setError(error.response?.data?.message || error.message || 'Failed to fetch orders');\r\n\r\n            // If it's an auth error, redirect to login\r\n            if (error.response?.status === 401) {\r\n                localStorage.removeItem('token');\r\n                localStorage.removeItem('adminToken');\r\n                window.location.href = '/admin/login';\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Update order status on backend\r\n    const updateOrderStatusOnBackend = async (orderId, newStatus, refundReason = null) => {\r\n        try {\r\n            const token = localStorage.getItem('token') || localStorage.getItem('adminToken');\r\n\r\n            if (!token) {\r\n                throw new Error('Authentication token not found');\r\n            }\r\n\r\n            const response = await axios.put(`${API_BASE_URL}/orders/admin/${orderId}/status`, {\r\n                status: newStatus,\r\n                refundReason: refundReason\r\n            }, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n\r\n            if (response.data.success) {\r\n                return response.data.order;\r\n            } else {\r\n                throw new Error(response.data.message || 'Failed to update order status');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating order status:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    // Initial fetch\r\n    useEffect(() => {\r\n        fetchOrders();\r\n    }, []);\r\n\r\n    // Filter orders when statusFilter or searchTerm changes\r\n    useEffect(() => {\r\n        // If we're using backend filtering, refetch data\r\n        // Otherwise, filter locally\r\n        if (statusFilter !== 'all' || searchTerm) {\r\n            // Debounce search to avoid too many API calls\r\n            const timeoutId = setTimeout(() => {\r\n                fetchOrders(1); // Reset to page 1 when filtering\r\n            }, 500);\r\n\r\n            return () => clearTimeout(timeoutId);\r\n        } else {\r\n            fetchOrders(1);\r\n        }\r\n    }, [statusFilter, searchTerm]);\r\n\r\n    // Local filtering (if you prefer client-side filtering)\r\n    const filterOrdersLocally = () => {\r\n        let filtered = orders;\r\n\r\n        if (statusFilter !== 'all') {\r\n            filtered = filtered.filter(order => order.status === statusFilter);\r\n        }\r\n\r\n        if (searchTerm) {\r\n            const searchLower = searchTerm.toLowerCase();\r\n            filtered = filtered.filter(order =>\r\n                order.id.toLowerCase().includes(searchLower) ||\r\n                order.orderNumber?.toLowerCase().includes(searchLower) ||\r\n                order.studentName.toLowerCase().includes(searchLower) ||\r\n                order.course.toLowerCase().includes(searchLower) ||\r\n                order.email.toLowerCase().includes(searchLower)\r\n            );\r\n        }\r\n\r\n        setFilteredOrders(filtered);\r\n    };\r\n\r\n    const getStatusBadge = (status) => {\r\n        const statusClasses = {\r\n            pending: 'bg-warning',\r\n            confirmed: 'bg-info',\r\n            processing: 'bg-info',\r\n            completed: 'bg-success',\r\n            cancelled: 'bg-danger',\r\n            refunded: 'bg-secondary'\r\n        };\r\n        return statusClasses[status] || 'bg-secondary';\r\n    };\r\n\r\n    const getAvailableActions = (status, paymentStatus) => {\r\n        const actions = [];\r\n\r\n        switch (status) {\r\n            case 'pending':\r\n                actions.push(\r\n                    { action: 'confirmed', label: 'Confirm Order', className: 'dropdown-item' },\r\n                    { action: 'cancelled', label: 'Cancel Order', className: 'dropdown-item text-danger' }\r\n                );\r\n                break;\r\n            case 'confirmed':\r\n                actions.push(\r\n                    { action: 'processing', label: 'Mark Processing', className: 'dropdown-item' },\r\n                    { action: 'completed', label: 'Mark Completed', className: 'dropdown-item' },\r\n                    { action: 'cancelled', label: 'Cancel Order', className: 'dropdown-item text-danger' }\r\n                );\r\n                break;\r\n            case 'processing':\r\n                actions.push(\r\n                    { action: 'completed', label: 'Mark Completed', className: 'dropdown-item' },\r\n                    { action: 'cancelled', label: 'Cancel Order', className: 'dropdown-item text-danger' }\r\n                );\r\n                break;\r\n            case 'completed':\r\n                if (paymentStatus === 'completed') {\r\n                    actions.push(\r\n                        { action: 'refund', label: 'Issue Refund', className: 'dropdown-item text-warning' }\r\n                    );\r\n                }\r\n                actions.push(\r\n                    { action: 'download', label: 'Download Receipt', className: 'dropdown-item' }\r\n                );\r\n                break;\r\n            case 'cancelled':\r\n                if (paymentStatus !== 'completed') {\r\n                    actions.push(\r\n                        { action: 'pending', label: 'Reactivate Order', className: 'dropdown-item text-success' }\r\n                    );\r\n                }\r\n                break;\r\n            case 'refunded':\r\n                actions.push(\r\n                    { action: 'download', label: 'Download Receipt', className: 'dropdown-item' }\r\n                );\r\n                break;\r\n        }\r\n\r\n        return actions;\r\n    };\r\n\r\n    const updateOrderStatus = async (orderId, newStatus) => {\r\n        try {\r\n            setLoading(true);\r\n\r\n            // Update on backend\r\n            const updatedOrder = await updateOrderStatusOnBackend(orderId, newStatus);\r\n\r\n            // Update local state\r\n            setOrders(prevOrders =>\r\n                prevOrders.map(order =>\r\n                    order.id === orderId\r\n                        ? {\r\n                            ...order,\r\n                            status: newStatus,\r\n                            lastUpdated: new Date().toISOString()\r\n                        }\r\n                        : order\r\n                )\r\n            );\r\n\r\n            setShowModal(false);\r\n\r\n            // Show success message\r\n            alert(`Order ${orderId} status updated to ${newStatus}`);\r\n\r\n        } catch (error) {\r\n            alert(`Failed to update order status: ${error.message}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const generateReceiptHTML = (order) => {\r\n        return `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n            <title>Receipt - ${order.orderNumber || order.id}</title>\r\n            <style>\r\n                body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }\r\n                .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }\r\n                .order-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }\r\n                .table { width: 100%; border-collapse: collapse; margin: 20px 0; }\r\n                .table th, .table td { border: 1px solid #ddd; padding: 12px; text-align: left; }\r\n                .table th { background-color: #f8f9fa; }\r\n                .pricing { margin-top: 20px; }\r\n                .pricing-row { display: flex; justify-content: space-between; padding: 5px 0; }\r\n                .total { font-size: 1.2em; font-weight: bold; border-top: 2px solid #333; padding-top: 10px; }\r\n                .footer { margin-top: 40px; text-align: center; color: #666; font-size: 0.9em; }\r\n            </style>\r\n        </head>\r\n        <body>\r\n            <div class=\"header\">\r\n                <h1>Course Order Receipt</h1>\r\n                <p>Thank you for your purchase!</p>\r\n            </div>\r\n            \r\n            <div class=\"order-info\">\r\n                <div>\r\n                    <h3>Order Details</h3>\r\n                    <p><strong>Order ID:</strong> ${order.orderNumber || order.id}</p>\r\n                    <p><strong>Date:</strong> ${new Date(order.orderDate).toLocaleDateString()}</p>\r\n                    <p><strong>Status:</strong> ${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</p>\r\n                    <p><strong>Payment Status:</strong> ${(order.paymentStatus || '').charAt(0).toUpperCase() + (order.paymentStatus || '').slice(1)}</p>\r\n                </div>\r\n                <div>\r\n                    <h3>Student Information</h3>\r\n                    <p><strong>Name:</strong> ${order.studentName}</p>\r\n                    <p><strong>Email:</strong> ${order.email}</p>\r\n                    <p><strong>Phone:</strong> ${order.phone}</p>\r\n                </div>\r\n            </div>\r\n            \r\n            <h3>Courses Purchased</h3>\r\n            <table class=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Course</th>\r\n                        <th>Quantity</th>\r\n                        <th>Price</th>\r\n                        <th>Total</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    ${order.items?.map(item => `\r\n                        <tr>\r\n                            <td>${item.course?.title || 'Unknown Course'}</td>\r\n                            <td>${item.quantity || 1}</td>\r\n                            <td>${item.price || 0}</td>\r\n                            <td>${(item.price || 0) * (item.quantity || 1)}</td>\r\n                        </tr>\r\n                    `).join('') || `\r\n                        <tr>\r\n                            <td colspan=\"4\">No course details available</td>\r\n                        </tr>\r\n                    `}\r\n                </tbody>\r\n            </table>\r\n            \r\n            <div class=\"pricing\">\r\n                <div class=\"pricing-row\">\r\n                    <span>Subtotal:</span>\r\n                    <span>${order.subtotal || 0}</span>\r\n                </div>\r\n                ${order.shipping > 0 ? `\r\n                <div class=\"pricing-row\">\r\n                    <span>Shipping:</span>\r\n                    <span>${order.shipping}</span>\r\n                </div>\r\n                ` : ''}\r\n                ${order.tax > 0 ? `\r\n                <div class=\"pricing-row\">\r\n                    <span>Tax (GST):</span>\r\n                    <span>${order.tax}</span>\r\n                </div>\r\n                ` : ''}\r\n                <div class=\"pricing-row total\">\r\n                    <span>Total Amount:</span>\r\n                    <span>${order.amount}</span>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class=\"footer\">\r\n                <p>Generated on ${new Date().toLocaleString()}</p>\r\n                <p>This is an automatically generated receipt.</p>\r\n                <p>Payment Method: ${order.paymentMethod}</p>\r\n            </div>\r\n        </body>\r\n        </html>\r\n        `;\r\n    };\r\n\r\n    const downloadReceipt = (order) => {\r\n        const receiptHTML = generateReceiptHTML(order);\r\n        const blob = new Blob([receiptHTML], { type: 'text/html' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `receipt-${order.orderNumber || order.id}.html`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const handleActionClick = (orderId, action) => {\r\n        const order = orders.find(o => o.id === orderId);\r\n\r\n        switch (action) {\r\n            case 'refund':\r\n                setSelectedOrder(order);\r\n                setShowRefundModal(true);\r\n                break;\r\n            case 'download':\r\n                if (order) {\r\n                    downloadReceipt(order);\r\n                }\r\n                break;\r\n            default:\r\n                updateOrderStatus(orderId, action);\r\n        }\r\n    };\r\n\r\n    const handleRefund = async () => {\r\n        if (selectedOrder && refundReason.trim()) {\r\n            try {\r\n                await updateOrderStatusOnBackend(selectedOrder.id, 'refunded', refundReason);\r\n                updateOrderStatus(selectedOrder.id, 'refunded');\r\n                setShowRefundModal(false);\r\n                setRefundReason('');\r\n                alert(`Refund processed for ${selectedOrder.orderNumber || selectedOrder.id}. Reason: ${refundReason}`);\r\n            } catch (error) {\r\n                alert(`Failed to process refund: ${error.message}`);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleViewOrder = (order) => {\r\n        setSelectedOrder(order);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const closeModal = () => {\r\n        setShowModal(false);\r\n        setSelectedOrder(null);\r\n    };\r\n\r\n    const closeRefundModal = () => {\r\n        setShowRefundModal(false);\r\n        setRefundReason('');\r\n        setSelectedOrder(null);\r\n    };\r\n\r\n    const handleModalBackdropClick = (e) => {\r\n        if (e.target === e.currentTarget) {\r\n            closeModal();\r\n        }\r\n    };\r\n\r\n    const handleRefundModalBackdropClick = (e) => {\r\n        if (e.target === e.currentTarget) {\r\n            closeRefundModal();\r\n        }\r\n    };\r\n\r\n    const getOrderStats = () => {\r\n        const stats = {\r\n            total: orders.length,\r\n            completed: orders.filter(o => o.status === 'completed').length,\r\n            pending: orders.filter(o => o.status === 'pending').length,\r\n            confirmed: orders.filter(o => o.status === 'confirmed').length,\r\n            processing: orders.filter(o => o.status === 'processing').length,\r\n            cancelled: orders.filter(o => o.status === 'cancelled').length,\r\n            refunded: orders.filter(o => o.status === 'refunded').length\r\n        };\r\n        return stats;\r\n    };\r\n\r\n    const exportOrdersToCSV = () => {\r\n        const headers = [\r\n            'Order Number', 'Order ID', 'Student Name', 'Email', 'Course',\r\n            'Order Date', 'Amount', 'Status', 'Payment Status', 'Payment Method',\r\n            'Phone', 'Last Updated'\r\n        ];\r\n\r\n        const csvContent = [\r\n            headers.join(','),\r\n            ...filteredOrders.map(order => [\r\n                order.orderNumber || order.id,\r\n                order.id,\r\n                `\"${order.studentName}\"`,\r\n                order.email,\r\n                `\"${order.course}\"`,\r\n                order.orderDate,\r\n                order.amount,\r\n                order.status,\r\n                order.paymentStatus || '',\r\n                order.paymentMethod,\r\n                order.phone,\r\n                order.lastUpdated\r\n            ].join(','))\r\n        ].join('\\n');\r\n\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `orders-export-${new Date().toISOString().split('T')[0]}.csv`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // Calculate stats\r\n    const stats = getOrderStats();\r\n\r\n    return (\r\n        <>\r\n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css\" />\r\n            <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n\r\n            <div className=\"container-fluid py-4\">\r\n                {/* Header */}\r\n                <div className=\"row mb-4\">\r\n                    <div className=\"col-12\">\r\n                        <div className=\"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center\">\r\n                            <div>\r\n                                <h1 className=\"h3 mb-1 text-primary\">\r\n                                    <i className=\"bi bi-cart-check me-2\"></i>\r\n                                    Order Management\r\n                                </h1>\r\n                                <p className=\"text-muted mb-3 mb-md-0\">Manage and track all course orders efficiently</p>\r\n                            </div>\r\n                            <div className=\"d-flex gap-2 flex-wrap\">\r\n                                <button\r\n                                    className=\"btn btn-outline-success\"\r\n                                    onClick={exportOrdersToCSV}\r\n                                    title=\"Export orders to CSV\"\r\n                                >\r\n                                    <i className=\"bi bi-download me-2\"></i>\r\n                                    Export CSV\r\n                                </button>\r\n                                <button\r\n                                    className=\"btn btn-outline-info\"\r\n                                    onClick={() => fetchOrders()}\r\n                                    disabled={loading}\r\n                                    title=\"Refresh orders\"\r\n                                >\r\n                                    <i className={`bi ${loading ? 'bi-arrow-repeat spinner-border spinner-border-sm' : 'bi-arrow-clockwise'} me-2`}></i>\r\n                                    Refresh\r\n                                </button>\r\n                                <button className=\"btn btn-primary\">\r\n                                    <i className=\"bi bi-plus-circle me-2\"></i>\r\n                                    Manual Order\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Error Alert */}\r\n                {error && (\r\n                    <div className=\"row mb-4\">\r\n                        <div className=\"col-12\">\r\n                            <div className=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\r\n                                <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n                                <strong>Error:</strong> {error}\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn-close\"\r\n                                    onClick={() => setError(null)}\r\n                                    aria-label=\"Close\"\r\n                                ></button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Statistics Cards */}\r\n                <div className=\"row mb-4\">\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Total Orders</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.total}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-cart3 fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Completed</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.completed}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-check-circle fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Pending</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.pending}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-clock fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Processing</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.processing}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-arrow-repeat fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Cancelled</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.cancelled}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-x-circle fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Refunded</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.refunded}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-arrow-left-circle fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {/* Filters and Search */}\r\n                <div className=\"row mb-4\">\r\n                    <div className=\"col-12\">\r\n                        <div className=\"card shadow-sm\">\r\n                            <div className=\"card-header bg-light\">\r\n                                <h5 className=\"card-title mb-0\">\r\n                                    <i className=\"bi bi-funnel me-2\"></i>\r\n                                    Filters & Search\r\n                                </h5>\r\n                            </div>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"row g-3\">\r\n                                    <div className=\"col-12 col-md-6 col-lg-5\">\r\n                                        <label className=\"form-label fw-semibold\">\r\n                                            <i className=\"bi bi-search me-1\"></i>\r\n                                            Search Orders\r\n                                        </label>\r\n                                        <div className=\"input-group\">\r\n                                            <span className=\"input-group-text bg-light\">\r\n                                                <i className=\"bi bi-search text-muted\"></i>\r\n                                            </span>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                className=\"form-control\"\r\n                                                placeholder=\"Search by Order ID, Student, Email, or Course\"\r\n                                                value={searchTerm}\r\n                                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                                            />\r\n                                            {searchTerm && (\r\n                                                <button\r\n                                                    className=\"btn btn-outline-secondary\"\r\n                                                    onClick={() => setSearchTerm('')}\r\n                                                    title=\"Clear search\"\r\n                                                >\r\n                                                    <i className=\"bi bi-x\"></i>\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-12 col-md-6 col-lg-3\">\r\n                                        <label className=\"form-label fw-semibold\">\r\n                                            <i className=\"bi bi-filter me-1\"></i>\r\n                                            Filter by Status\r\n                                        </label>\r\n                                        <select\r\n                                            className=\"form-select\"\r\n                                            value={statusFilter}\r\n                                            onChange={(e) => setStatusFilter(e.target.value)}\r\n                                        >\r\n                                            <option value=\"all\">All Status</option>\r\n                                            <option value=\"pending\">Pending</option>\r\n                                            <option value=\"confirmed\">Confirmed</option>\r\n                                            <option value=\"processing\">Processing</option>\r\n                                            <option value=\"completed\">Completed</option>\r\n                                            <option value=\"cancelled\">Cancelled</option>\r\n                                            <option value=\"refunded\">Refunded</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className=\"col-12 col-lg-4 d-flex align-items-end\">\r\n                                        <div className=\"d-flex gap-2 w-100\">\r\n                                            <button\r\n                                                className=\"btn btn-outline-secondary flex-grow-1\"\r\n                                                onClick={() => {\r\n                                                    setSearchTerm('');\r\n                                                    setStatusFilter('all');\r\n                                                }}\r\n                                            >\r\n                                                <i className=\"bi bi-arrow-clockwise me-2\"></i>\r\n                                                Reset Filters\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"btn btn-info\"\r\n                                                onClick={() => fetchOrders()}\r\n                                                disabled={loading}\r\n                                                title=\"Apply filters\"\r\n                                            >\r\n                                                <i className={`bi ${loading ? 'bi-arrow-repeat spinner-border spinner-border-sm' : 'bi-check2'}`}></i>\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Loading Indicator */}\r\n                {loading && (\r\n                    <div className=\"row mb-4\">\r\n                        <div className=\"col-12\">\r\n                            <div className=\"text-center\">\r\n                                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                                    <span className=\"visually-hidden\">Loading...</span>\r\n                                </div>\r\n                                <p className=\"mt-2 text-muted\">Loading orders...</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Orders Table */}\r\n                <div className=\"row\">\r\n                    <div className=\"col-12\">\r\n                        <div className=\"card shadow-sm\">\r\n                            <div className=\"card-header bg-light d-flex justify-content-between align-items-center\">\r\n                                <h5 className=\"card-title mb-0\">\r\n                                    <i className=\"bi bi-table me-2\"></i>\r\n                                    Orders ({filteredOrders.length})\r\n                                </h5>\r\n                                <div className=\"d-flex gap-2\">\r\n                                    <span className=\"badge bg-primary\">\r\n                                        Showing {filteredOrders.length} of {pagination.total || orders.length}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"card-body p-0\">\r\n                                <div className=\"table-responsive\">\r\n                                    <table className=\"table table-hover mb-0\">\r\n                                        <thead className=\"table-dark\">\r\n                                            <tr>\r\n                                                <th className=\"text-center\">#</th>\r\n                                                <th>Order ID</th>\r\n                                                <th>Student</th>\r\n                                                <th className=\"d-none d-md-table-cell\">Course</th>\r\n                                                <th className=\"d-none d-lg-table-cell\">Date</th>\r\n                                                <th>Amount</th>\r\n                                                <th>Status</th>\r\n                                                <th className=\"text-center\">Actions</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            {filteredOrders.map((order, index) => (\r\n                                                <tr key={order.id} className=\"align-middle\">\r\n                                                    <td className=\"text-center text-muted fw-semibold\">\r\n                                                        {index + 1}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div>\r\n                                                            <strong className=\"text-primary\">{order.orderNumber || order.id}</strong>\r\n                                                            <br />\r\n                                                            <small className=\"text-muted\">{order.id}</small>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div>\r\n                                                            <div className=\"fw-semibold\">{order.studentName}</div>\r\n                                                            <small className=\"text-muted\">{order.email}</small>\r\n                                                            <small className=\"text-muted d-block d-md-none\">\r\n                                                                <i className=\"bi bi-book me-1\"></i>\r\n                                                                {order.course}\r\n                                                            </small>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td className=\"d-none d-md-table-cell\">\r\n                                                        <div\r\n                                                            className=\"text-truncate\"\r\n                                                            style={{ maxWidth: '200px' }}\r\n                                                            title={order.course}\r\n                                                        >\r\n                                                            <i className=\"bi bi-book text-muted me-1\"></i>\r\n                                                            {order.course}\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td className=\"d-none d-lg-table-cell\">\r\n                                                        <div>\r\n                                                            <div>{new Date(order.orderDate).toLocaleDateString()}</div>\r\n                                                            <small className=\"text-muted\">\r\n                                                                {new Date(order.orderDate).toLocaleTimeString()}\r\n                                                            </small>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div>\r\n                                                            <strong className=\"text-success\">{order.amount}</strong>\r\n                                                            <br />\r\n                                                            <small className=\"text-muted\">{order.paymentMethod}</small>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <span className={`badge ${getStatusBadge(order.status)} fs-6 px-3 py-2`}>\r\n                                                            <i className=\"bi bi-circle-fill me-1\" style={{ fontSize: '0.5rem' }}></i>\r\n                                                            {order.status.charAt(0).toUpperCase() + order.status.slice(1)}\r\n                                                        </span>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div className=\"d-flex gap-1 justify-content-center\">\r\n                                                            <button\r\n                                                                className=\"btn btn-sm btn-outline-primary\"\r\n                                                                onClick={() => handleViewOrder(order)}\r\n                                                                title=\"View order details\"\r\n                                                            >\r\n                                                                <i className=\"bi bi-eye\"></i>\r\n                                                            </button>\r\n                                                            {getAvailableActions(order.status, order.paymentStatus).length > 0 && (\r\n                                                                <div className=\"btn-group\">\r\n                                                                    <button\r\n                                                                        className=\"btn btn-sm btn-outline-secondary dropdown-toggle\"\r\n                                                                        type=\"button\"\r\n                                                                        data-bs-toggle=\"dropdown\"\r\n                                                                        aria-expanded=\"false\"\r\n                                                                        title=\"More actions\"\r\n                                                                    >\r\n                                                                        <i className=\"bi bi-three-dots-vertical\"></i>\r\n                                                                    </button>\r\n                                                                    <ul className=\"dropdown-menu\">\r\n                                                                        {getAvailableActions(order.status, order.paymentStatus).map((actionItem, idx) => (\r\n                                                                            <li key={idx}>\r\n                                                                                <button\r\n                                                                                    className={actionItem.className}\r\n                                                                                    onClick={() => handleActionClick(order.id, actionItem.action)}\r\n                                                                                >\r\n                                                                                    <i className={`bi ${actionItem.action === 'confirmed' ? 'bi-check-circle' :\r\n                                                                                        actionItem.action === 'processing' ? 'bi-arrow-repeat' :\r\n                                                                                            actionItem.action === 'completed' ? 'bi-check-circle-fill' :\r\n                                                                                                actionItem.action === 'cancelled' ? 'bi-x-circle' :\r\n                                                                                                    actionItem.action === 'refund' ? 'bi-arrow-left-circle' :\r\n                                                                                                        actionItem.action === 'download' ? 'bi-download' :\r\n                                                                                                            'bi-arrow-right'\r\n                                                                                        } me-2`}></i>\r\n                                                                                    {actionItem.label}\r\n                                                                                </button>\r\n                                                                            </li>\r\n                                                                        ))}\r\n                                                                    </ul>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            ))}\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                                {/* Empty State */}\r\n                                {!loading && filteredOrders.length === 0 && (\r\n                                    <div className=\"text-center py-5\">\r\n                                        <i className=\"bi bi-inbox display-1 text-muted\"></i>\r\n                                        <h5 className=\"mt-3 text-muted\">No orders found</h5>\r\n                                        <p className=\"text-muted\">\r\n                                            {searchTerm || statusFilter !== 'all'\r\n                                                ? 'Try adjusting your search criteria or filters'\r\n                                                : 'No orders have been placed yet'\r\n                                            }\r\n                                        </p>\r\n                                        {(searchTerm || statusFilter !== 'all') && (\r\n                                            <button\r\n                                                className=\"btn btn-outline-primary\"\r\n                                                onClick={() => {\r\n                                                    setSearchTerm('');\r\n                                                    setStatusFilter('all');\r\n                                                }}\r\n                                            >\r\n                                                <i className=\"bi bi-arrow-clockwise me-2\"></i>\r\n                                                Clear Filters\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Pagination */}\r\n                {pagination.pages > 1 && (\r\n                    <div className=\"row mt-4\">\r\n                        <div className=\"col-12\">\r\n                            <nav aria-label=\"Orders pagination\">\r\n                                <ul className=\"pagination justify-content-center\">\r\n                                    <li className={`page-item ${pagination.current === 1 ? 'disabled' : ''}`}>\r\n                                        <button\r\n                                            className=\"page-link\"\r\n                                            onClick={() => fetchOrders(pagination.current - 1)}\r\n                                            disabled={pagination.current === 1}\r\n                                        >\r\n                                            <i className=\"bi bi-chevron-left\"></i>\r\n                                        </button>\r\n                                    </li>\r\n                                    {[...Array(pagination.pages)].map((_, index) => (\r\n                                        <li key={index + 1} className={`page-item ${pagination.current === index + 1 ? 'active' : ''}`}>\r\n                                            <button\r\n                                                className=\"page-link\"\r\n                                                onClick={() => fetchOrders(index + 1)}\r\n                                            >\r\n                                                {index + 1}\r\n                                            </button>\r\n                                        </li>\r\n                                    ))}\r\n                                    <li className={`page-item ${pagination.current === pagination.pages ? 'disabled' : ''}`}>\r\n                                        <button\r\n                                            className=\"page-link\"\r\n                                            onClick={() => fetchOrders(pagination.current + 1)}\r\n                                            disabled={pagination.current === pagination.pages}\r\n                                        >\r\n                                            <i className=\"bi bi-chevron-right\"></i>\r\n                                        </button>\r\n                                    </li>\r\n                                </ul>\r\n                            </nav>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Order Details Modal */}\r\n                {showModal && selectedOrder && (\r\n                    <div\r\n                        className=\"modal d-block\"\r\n                        tabIndex=\"-1\"\r\n                        style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}\r\n                        onClick={handleModalBackdropClick}\r\n                        ref={modalRef}\r\n                    >\r\n                        <div className=\"modal-dialog modal-lg modal-dialog-scrollable\">\r\n                            <div className=\"modal-content\">\r\n                                <div className=\"modal-header bg-primary text-white\">\r\n                                    <h5 className=\"modal-title\">\r\n                                        <i className=\"bi bi-receipt me-2\"></i>\r\n                                        Order Details - {selectedOrder.orderNumber || selectedOrder.id}\r\n                                    </h5>\r\n                                    <button type=\"button\" className=\"btn-close btn-close-white\" onClick={closeModal}></button>\r\n                                </div>\r\n                                <div className=\"modal-body\">\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-md-6\">\r\n                                            <div className=\"card mb-3\">\r\n                                                <div className=\"card-header bg-light\">\r\n                                                    <h6 className=\"mb-0\">\r\n                                                        <i className=\"bi bi-person me-2\"></i>\r\n                                                        Student Information\r\n                                                    </h6>\r\n                                                </div>\r\n                                                <div className=\"card-body\">\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Name:</strong> {selectedOrder.studentName}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Email:</strong>\r\n                                                        <a href={`mailto:${selectedOrder.email}`} className=\"text-decoration-none ms-1\">\r\n                                                            {selectedOrder.email}\r\n                                                        </a>\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Phone:</strong>\r\n                                                        <a href={`tel:${selectedOrder.phone}`} className=\"text-decoration-none ms-1\">\r\n                                                            {selectedOrder.phone}\r\n                                                        </a>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-md-6\">\r\n                                            <div className=\"card mb-3\">\r\n                                                <div className=\"card-header bg-light\">\r\n                                                    <h6 className=\"mb-0\">\r\n                                                        <i className=\"bi bi-info-circle me-2\"></i>\r\n                                                        Order Information\r\n                                                    </h6>\r\n                                                </div>\r\n                                                <div className=\"card-body\">\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Order ID:</strong> {selectedOrder.id}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Order Number:</strong> {selectedOrder.orderNumber || 'N/A'}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Date:</strong> {new Date(selectedOrder.orderDate).toLocaleString()}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Last Updated:</strong> {new Date(selectedOrder.lastUpdated).toLocaleString()}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Status:</strong>\r\n                                                        <span className={`badge ${getStatusBadge(selectedOrder.status)} ms-2`}>\r\n                                                            {selectedOrder.status.charAt(0).toUpperCase() + selectedOrder.status.slice(1)}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Payment Status:</strong>\r\n                                                        <span className={`badge ${selectedOrder.paymentStatus === 'completed' ? 'bg-success' : 'bg-warning'} ms-2`}>\r\n                                                            {selectedOrder.paymentStatus || 'N/A'}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-12\">\r\n                                            <div className=\"card\">\r\n                                                <div className=\"card-header bg-light\">\r\n                                                    <h6 className=\"mb-0\">\r\n                                                        <i className=\"bi bi-book me-2\"></i>\r\n                                                        Course Details\r\n                                                    </h6>\r\n                                                </div>\r\n                                                <div className=\"card-body\">\r\n                                                    <h6 className=\"card-title text-primary\">{selectedOrder.course}</h6>\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\"col-6\">\r\n                                                            <div className=\"mb-2\">\r\n                                                                <strong>Subtotal:</strong> {selectedOrder.subtotal || selectedOrder.amount}\r\n                                                            </div>\r\n                                                            {selectedOrder.tax > 0 && (\r\n                                                                <div className=\"mb-2\">\r\n                                                                    <strong>Tax (GST):</strong> {selectedOrder.tax}\r\n                                                                </div>\r\n                                                            )}\r\n                                                            {selectedOrder.shipping > 0 && (\r\n                                                                <div className=\"mb-2\">\r\n                                                                    <strong>Shipping:</strong> {selectedOrder.shipping}\r\n                                                                </div>\r\n                                                            )}\r\n                                                            <div className=\"mb-2\">\r\n                                                                <strong className=\"text-success\">Total Amount:</strong>\r\n                                                                <span className=\"text-success fw-bold ms-1\">{selectedOrder.amount}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"col-6\">\r\n                                                            <div className=\"mb-2\">\r\n                                                                <strong>Payment Method:</strong> {selectedOrder.paymentMethod}\r\n                                                            </div>\r\n                                                            {selectedOrder.items && selectedOrder.items.length > 0 && (\r\n                                                                <div className=\"mb-2\">\r\n                                                                    <strong>Items:</strong> {selectedOrder.items.length}\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"modal-footer\">\r\n                                    <button type=\"button\" className=\"btn btn-secondary\" onClick={closeModal}>\r\n                                        <i className=\"bi bi-x me-2\"></i>\r\n                                        Close\r\n                                    </button>\r\n                                    <div className=\"btn-group\">\r\n                                        {getAvailableActions(selectedOrder.status, selectedOrder.paymentStatus).map((actionItem, index) => (\r\n                                            <button\r\n                                                key={index}\r\n                                                className={`btn ${actionItem.action === 'refund' ? 'btn-warning' :\r\n                                                    actionItem.action === 'pending' ? 'btn-success' :\r\n                                                        actionItem.action === 'completed' ? 'btn-success' :\r\n                                                            actionItem.action === 'cancelled' ? 'btn-danger' :\r\n                                                                actionItem.action === 'download' ? 'btn-info' :\r\n                                                                    'btn-primary'\r\n                                                    }`}\r\n                                                onClick={() => handleActionClick(selectedOrder.id, actionItem.action)}\r\n                                            >\r\n                                                <i className={`bi ${actionItem.action === 'confirmed' ? 'bi-check-circle' :\r\n                                                    actionItem.action === 'processing' ? 'bi-arrow-repeat' :\r\n                                                        actionItem.action === 'completed' ? 'bi-check-circle-fill' :\r\n                                                            actionItem.action === 'cancelled' ? 'bi-x-circle' :\r\n                                                                actionItem.action === 'refund' ? 'bi-arrow-left-circle' :\r\n                                                                    actionItem.action === 'download' ? 'bi-download' :\r\n                                                                        'bi-arrow-right'\r\n                                                    } me-2`}></i>\r\n                                                {actionItem.label}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Refund Modal */}\r\n                {showRefundModal && selectedOrder && (\r\n                    <div\r\n                        className=\"modal d-block\"\r\n                        tabIndex=\"-1\"\r\n                        style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}\r\n                        onClick={handleRefundModalBackdropClick}\r\n                        ref={refundModalRef}\r\n                    >\r\n                        <div className=\"modal-dialog\">\r\n                            <div className=\"modal-content\">\r\n                                <div className=\"modal-header bg-warning text-dark\">\r\n                                    <h5 className=\"modal-title\">\r\n                                        <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n                                        Issue Refund\r\n                                    </h5>\r\n                                    <button type=\"button\" className=\"btn-close\" onClick={closeRefundModal}></button>\r\n                                </div>\r\n                                <div className=\"modal-body\">\r\n                                    <div className=\"alert alert-warning\">\r\n                                        <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n                                        You are about to issue a refund for order {selectedOrder.id} of ${selectedOrder.amount}\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                        <label className=\"form-label\">Refund Reason</label>\r\n                                        <textarea\r\n                                            className=\"form-control\"\r\n                                            rows=\"3\"\r\n                                            placeholder=\"Enter reason for refund...\"\r\n                                            value={refundReason}\r\n                                            onChange={(e) => setRefundReason(e.target.value)}\r\n                                        ></textarea>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"modal-footer\">\r\n                                    <button type=\"button\" className=\"btn btn-secondary\" onClick={closeRefundModal}>Cancel</button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"btn btn-warning\"\r\n                                        onClick={handleRefund}\r\n                                        disabled={!refundReason.trim()}\r\n                                    >\r\n                                        Issue Refund\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ManageOrders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}