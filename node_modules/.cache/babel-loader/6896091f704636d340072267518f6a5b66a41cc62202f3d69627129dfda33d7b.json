{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ManageOrders=()=>{const[orders,setOrders]=useState([]);const[filteredOrders,setFilteredOrders]=useState([]);const[statusFilter,setStatusFilter]=useState('all');const[searchTerm,setSearchTerm]=useState('');const[selectedOrder,setSelectedOrder]=useState(null);const[showModal,setShowModal]=useState(false);const[showRefundModal,setShowRefundModal]=useState(false);const[refundReason,setRefundReason]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[pagination,setPagination]=useState({current:1,pages:1,total:0});const modalRef=useRef(null);const refundModalRef=useRef(null);// API base URL - adjust according to your setup\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Fetch orders from backend\nconst fetchOrders=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;try{setLoading(true);setError(null);// Get token from localStorage or wherever you store it\nconst token=localStorage.getItem('token')||localStorage.getItem('adminToken');if(!token){throw new Error('Authentication token not found');}const response=await axios.get(`${API_BASE_URL}/orders/admin`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},params:{page,limit,status:statusFilter!=='all'?statusFilter:undefined,search:searchTerm||undefined}});if(response.data.success){const ordersData=response.data.orders.map(order=>{// Safely extract customer info\nconst customerInfo=order.customerInfo||{};const user=order.user||{};// Build student name with proper null checking\nlet studentName='N/A';if(customerInfo.firstName||customerInfo.lastName){studentName=`${customerInfo.firstName||''} ${customerInfo.lastName||''}`.trim();}else if(user.firstName||user.lastName){studentName=`${user.firstName||''} ${user.lastName||''}`.trim();}else if(user.username){studentName=user.username;}// Safely extract email\nconst email=customerInfo.email||user.email||'N/A';// Safely extract course information\nconst course=order.items&&Array.isArray(order.items)?order.items.map(item=>{var _item$course;return((_item$course=item.course)===null||_item$course===void 0?void 0:_item$course.title)||'Unknown Course';}).join(', '):'N/A';// Safely extract pricing information\nconst pricing=order.pricing||{};const payment=order.payment||{};return{id:order._id,orderNumber:order.orderNumber,studentName,email,course,orderDate:new Date(order.createdAt).toISOString().split('T')[0],amount:pricing.total||0,status:order.status,paymentMethod:payment.method||'N/A',phone:customerInfo.phone||'N/A',lastUpdated:order.updatedAt,// Additional backend data\npaymentStatus:payment.status,subtotal:pricing.subtotal||0,tax:pricing.tax||0,shipping:pricing.shipping||0,items:order.items||[],customerInfo:customerInfo,rawOrder:order// Keep full order data for detailed view\n};});setOrders(ordersData);setFilteredOrders(ordersData);if(response.data.pagination){setPagination(response.data.pagination);}}else{throw new Error(response.data.message||'Failed to fetch orders');}}catch(error){var _error$response,_error$response$data,_error$response2;console.error('Error fetching orders:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||'Failed to fetch orders');// If it's an auth error, redirect to login\nif(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===401){localStorage.removeItem('token');localStorage.removeItem('adminToken');window.location.href='/admin/login';}}finally{setLoading(false);}};// Update order status on backend\nconst updateOrderStatusOnBackend=async function(orderId,newStatus){let refundReason=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;try{const token=localStorage.getItem('token')||localStorage.getItem('adminToken');if(!token){throw new Error('Authentication token not found');}const response=await axios.put(`${API_BASE_URL}/orders/admin/${orderId}/status`,{status:newStatus,refundReason:refundReason},{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(response.data.success){return response.data.order;}else{throw new Error(response.data.message||'Failed to update order status');}}catch(error){console.error('Error updating order status:',error);throw error;}};// Initial fetch\nuseEffect(()=>{fetchOrders();},[]);// Filter orders when statusFilter or searchTerm changes\nuseEffect(()=>{// If we're using backend filtering, refetch data\n// Otherwise, filter locally\nif(statusFilter!=='all'||searchTerm){// Debounce search to avoid too many API calls\nconst timeoutId=setTimeout(()=>{fetchOrders(1);// Reset to page 1 when filtering\n},500);return()=>clearTimeout(timeoutId);}else{fetchOrders(1);}},[statusFilter,searchTerm]);// Local filtering (if you prefer client-side filtering)\nconst filterOrdersLocally=()=>{let filtered=orders;if(statusFilter!=='all'){filtered=filtered.filter(order=>order.status===statusFilter);}if(searchTerm){const searchLower=searchTerm.toLowerCase();filtered=filtered.filter(order=>{var _order$orderNumber;return order.id.toLowerCase().includes(searchLower)||((_order$orderNumber=order.orderNumber)===null||_order$orderNumber===void 0?void 0:_order$orderNumber.toLowerCase().includes(searchLower))||order.studentName.toLowerCase().includes(searchLower)||order.course.toLowerCase().includes(searchLower)||order.email.toLowerCase().includes(searchLower);});}setFilteredOrders(filtered);};const getStatusBadge=status=>{const statusClasses={pending:'bg-warning',confirmed:'bg-info',processing:'bg-info',completed:'bg-success',cancelled:'bg-danger',refunded:'bg-secondary'};return statusClasses[status]||'bg-secondary';};const getAvailableActions=(status,paymentStatus)=>{const actions=[];switch(status){case'pending':actions.push({action:'confirmed',label:'Confirm Order',className:'dropdown-item'},{action:'cancelled',label:'Cancel Order',className:'dropdown-item text-danger'});break;case'confirmed':actions.push({action:'processing',label:'Mark Processing',className:'dropdown-item'},{action:'completed',label:'Mark Completed',className:'dropdown-item'},{action:'cancelled',label:'Cancel Order',className:'dropdown-item text-danger'});break;case'processing':actions.push({action:'completed',label:'Mark Completed',className:'dropdown-item'},{action:'cancelled',label:'Cancel Order',className:'dropdown-item text-danger'});break;case'completed':if(paymentStatus==='completed'){actions.push({action:'refund',label:'Issue Refund',className:'dropdown-item text-warning'});}actions.push({action:'download',label:'Download Receipt',className:'dropdown-item'});break;case'cancelled':if(paymentStatus!=='completed'){actions.push({action:'pending',label:'Reactivate Order',className:'dropdown-item text-success'});}break;case'refunded':actions.push({action:'download',label:'Download Receipt',className:'dropdown-item'});break;}return actions;};const updateOrderStatus=async(orderId,newStatus)=>{try{setLoading(true);// Update on backend\nconst updatedOrder=await updateOrderStatusOnBackend(orderId,newStatus);// Update local state\nsetOrders(prevOrders=>prevOrders.map(order=>order.id===orderId?{...order,status:newStatus,lastUpdated:new Date().toISOString()}:order));setShowModal(false);// Show success message\nalert(`Order ${orderId} status updated to ${newStatus}`);}catch(error){alert(`Failed to update order status: ${error.message}`);}finally{setLoading(false);}};const generateReceiptHTML=order=>{var _order$items;return`\n        <!DOCTYPE html>\n        <html>\n        <head>\n            <title>Receipt - ${order.orderNumber||order.id}</title>\n            <style>\n                body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }\n                .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }\n                .order-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }\n                .table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n                .table th, .table td { border: 1px solid #ddd; padding: 12px; text-align: left; }\n                .table th { background-color: #f8f9fa; }\n                .pricing { margin-top: 20px; }\n                .pricing-row { display: flex; justify-content: space-between; padding: 5px 0; }\n                .total { font-size: 1.2em; font-weight: bold; border-top: 2px solid #333; padding-top: 10px; }\n                .footer { margin-top: 40px; text-align: center; color: #666; font-size: 0.9em; }\n            </style>\n        </head>\n        <body>\n            <div class=\"header\">\n                <h1>Course Order Receipt</h1>\n                <p>Thank you for your purchase!</p>\n            </div>\n            \n            <div class=\"order-info\">\n                <div>\n                    <h3>Order Details</h3>\n                    <p><strong>Order ID:</strong> ${order.orderNumber||order.id}</p>\n                    <p><strong>Date:</strong> ${new Date(order.orderDate).toLocaleDateString()}</p>\n                    <p><strong>Status:</strong> ${order.status.charAt(0).toUpperCase()+order.status.slice(1)}</p>\n                    <p><strong>Payment Status:</strong> ${(order.paymentStatus||'').charAt(0).toUpperCase()+(order.paymentStatus||'').slice(1)}</p>\n                </div>\n                <div>\n                    <h3>Student Information</h3>\n                    <p><strong>Name:</strong> ${order.studentName}</p>\n                    <p><strong>Email:</strong> ${order.email}</p>\n                    <p><strong>Phone:</strong> ${order.phone}</p>\n                </div>\n            </div>\n            \n            <h3>Courses Purchased</h3>\n            <table class=\"table\">\n                <thead>\n                    <tr>\n                        <th>Course</th>\n                        <th>Quantity</th>\n                        <th>Price</th>\n                        <th>Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${((_order$items=order.items)===null||_order$items===void 0?void 0:_order$items.map(item=>{var _item$course2;return`\n                        <tr>\n                            <td>${((_item$course2=item.course)===null||_item$course2===void 0?void 0:_item$course2.title)||'Unknown Course'}</td>\n                            <td>${item.quantity||1}</td>\n                            <td>₹${item.price||0}</td>\n                            <td>₹${(item.price||0)*(item.quantity||1)}</td>\n                        </tr>\n                    `;}).join(''))||`\n                        <tr>\n                            <td colspan=\"4\">No course details available</td>\n                        </tr>\n                    `}\n                </tbody>\n            </table>\n            \n            <div class=\"pricing\">\n                <div class=\"pricing-row\">\n                    <span>Subtotal:</span>\n                    <span>₹${order.subtotal||0}</span>\n                </div>\n                ${order.shipping>0?`\n                <div class=\"pricing-row\">\n                    <span>Shipping:</span>\n                    <span>₹${order.shipping}</span>\n                </div>\n                `:''}\n                ${order.tax>0?`\n                <div class=\"pricing-row\">\n                    <span>Tax (GST):</span>\n                    <span>₹${order.tax}</span>\n                </div>\n                `:''}\n                <div class=\"pricing-row total\">\n                    <span>Total Amount:</span>\n                    <span>₹${order.amount}</span>\n                </div>\n            </div>\n            \n            <div class=\"footer\">\n                <p>Generated on ${new Date().toLocaleString()}</p>\n                <p>This is an automatically generated receipt.</p>\n                <p>Payment Method: ${order.paymentMethod}</p>\n            </div>\n        </body>\n        </html>\n        `;};const downloadReceipt=order=>{const receiptHTML=generateReceiptHTML(order);const blob=new Blob([receiptHTML],{type:'text/html'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`receipt-${order.orderNumber||order.id}.html`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);};const handleActionClick=(orderId,action)=>{const order=orders.find(o=>o.id===orderId);switch(action){case'refund':setSelectedOrder(order);setShowRefundModal(true);break;case'download':if(order){downloadReceipt(order);}break;default:updateOrderStatus(orderId,action);}};const handleRefund=async()=>{if(selectedOrder&&refundReason.trim()){try{await updateOrderStatusOnBackend(selectedOrder.id,'refunded',refundReason);updateOrderStatus(selectedOrder.id,'refunded');setShowRefundModal(false);setRefundReason('');alert(`Refund processed for ${selectedOrder.orderNumber||selectedOrder.id}. Reason: ${refundReason}`);}catch(error){alert(`Failed to process refund: ${error.message}`);}}};const handleViewOrder=order=>{setSelectedOrder(order);setShowModal(true);};const closeModal=()=>{setShowModal(false);setSelectedOrder(null);};const closeRefundModal=()=>{setShowRefundModal(false);setRefundReason('');setSelectedOrder(null);};const handleModalBackdropClick=e=>{if(e.target===e.currentTarget){closeModal();}};const handleRefundModalBackdropClick=e=>{if(e.target===e.currentTarget){closeRefundModal();}};const getOrderStats=()=>{const stats={total:orders.length,completed:orders.filter(o=>o.status==='completed').length,pending:orders.filter(o=>o.status==='pending').length,confirmed:orders.filter(o=>o.status==='confirmed').length,processing:orders.filter(o=>o.status==='processing').length,cancelled:orders.filter(o=>o.status==='cancelled').length,refunded:orders.filter(o=>o.status==='refunded').length};return stats;};const exportOrdersToCSV=()=>{const headers=['Order Number','Order ID','Student Name','Email','Course','Order Date','Amount','Status','Payment Status','Payment Method','Phone','Last Updated'];const csvContent=[headers.join(','),...filteredOrders.map(order=>[order.orderNumber||order.id,order.id,`\"${order.studentName}\"`,order.email,`\"${order.course}\"`,order.orderDate,order.amount,order.status,order.paymentStatus||'',order.paymentMethod,order.phone,order.lastUpdated].join(','))].join('\\n');const blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`orders-export-${new Date().toISOString().split('T')[0]}.csv`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);};// Calculate stats\nconst stats=getOrderStats();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",href:\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css\"}),/*#__PURE__*/_jsx(\"link\",{href:\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css\",rel:\"stylesheet\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"h3 mb-1 text-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-cart-check me-2\"}),\"Order Management\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-3 mb-md-0\",children:\"Manage and track all course orders efficiently\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-success\",onClick:exportOrdersToCSV,title:\"Export orders to CSV\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download me-2\"}),\"Export CSV\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-info\",onClick:()=>fetchOrders(),disabled:loading,title:\"Refresh orders\",children:[/*#__PURE__*/_jsx(\"i\",{className:`bi ${loading?'bi-arrow-repeat spinner-border spinner-border-sm':'bi-arrow-clockwise'} me-2`}),\"Refresh\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-circle me-2\"}),\"Manual Order\"]})]})]})})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger alert-dismissible fade show\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setError(null),\"aria-label\":\"Close\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Total Orders\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.total})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-cart3 fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.completed})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-circle fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.pending})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Processing\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.processing})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-repeat fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.cancelled})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-circle fs-2 opacity-75\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient text-dark h-100\",style:{background:'linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Refunded\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold\",children:stats.refunded})]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left-circle fs-2 opacity-75\"})]})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-light\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-funnel me-2\"}),\"Filters & Search\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6 col-lg-5\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label fw-semibold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-search me-1\"}),\"Search Orders\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text bg-light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-search text-muted\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search by Order ID, Student, Email, or Course\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary\",onClick:()=>setSearchTerm(''),title:\"Clear search\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6 col-lg-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label fw-semibold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-filter me-1\"}),\"Filter by Status\"]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:statusFilter,onChange:e=>setStatusFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"confirmed\",children:\"Confirmed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"processing\",children:\"Processing\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"refunded\",children:\"Refunded\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4 d-flex align-items-end\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2 w-100\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary flex-grow-1\",onClick:()=>{setSearchTerm('');setStatusFilter('all');},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-clockwise me-2\"}),\"Reset Filters\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info\",onClick:()=>fetchOrders(),disabled:loading,title:\"Apply filters\",children:/*#__PURE__*/_jsx(\"i\",{className:`bi ${loading?'bi-arrow-repeat spinner-border spinner-border-sm':'bi-check2'}`})})]})})]})})]})})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-muted\",children:\"Loading orders...\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header bg-light d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-table me-2\"}),\"Orders (\",filteredOrders.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex gap-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-primary\",children:[\"Showing \",filteredOrders.length,\" of \",pagination.total||orders.length]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Student\"}),/*#__PURE__*/_jsx(\"th\",{className:\"d-none d-md-table-cell\",children:\"Course\"}),/*#__PURE__*/_jsx(\"th\",{className:\"d-none d-lg-table-cell\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredOrders.map((order,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"align-middle\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center text-muted fw-semibold\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-primary\",children:order.orderNumber||order.id}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:order.id})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-semibold\",children:order.studentName}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:order.email}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block d-md-none\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-book me-1\"}),order.course]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"d-none d-md-table-cell\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-truncate\",style:{maxWidth:'200px'},title:order.course,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-book text-muted me-1\"}),order.course]})}),/*#__PURE__*/_jsx(\"td\",{className:\"d-none d-lg-table-cell\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:new Date(order.orderDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:new Date(order.orderDate).toLocaleTimeString()})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"strong\",{className:\"text-success\",children:[\"\\u20B9\",order.amount]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:order.paymentMethod})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:`badge ${getStatusBadge(order.status)} fs-6 px-3 py-2`,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-circle-fill me-1\",style:{fontSize:'0.5rem'}}),order.status.charAt(0).toUpperCase()+order.status.slice(1)]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1 justify-content-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary\",onClick:()=>handleViewOrder(order),title:\"View order details\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye\"})}),getAvailableActions(order.status,order.paymentStatus).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-secondary dropdown-toggle\",type:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\",title:\"More actions\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-three-dots-vertical\"})}),/*#__PURE__*/_jsx(\"ul\",{className:\"dropdown-menu\",children:getAvailableActions(order.status,order.paymentStatus).map((actionItem,idx)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{className:actionItem.className,onClick:()=>handleActionClick(order.id,actionItem.action),children:[/*#__PURE__*/_jsx(\"i\",{className:`bi ${actionItem.action==='confirmed'?'bi-check-circle':actionItem.action==='processing'?'bi-arrow-repeat':actionItem.action==='completed'?'bi-check-circle-fill':actionItem.action==='cancelled'?'bi-x-circle':actionItem.action==='refund'?'bi-arrow-left-circle':actionItem.action==='download'?'bi-download':'bi-arrow-right'} me-2`}),actionItem.label]})},idx))})]})]})})]},order.id))})]})}),!loading&&filteredOrders.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-inbox display-1 text-muted\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"mt-3 text-muted\",children:\"No orders found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:searchTerm||statusFilter!=='all'?'Try adjusting your search criteria or filters':'No orders have been placed yet'}),(searchTerm||statusFilter!=='all')&&/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary\",onClick:()=>{setSearchTerm('');setStatusFilter('all');},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-clockwise me-2\"}),\"Clear Filters\"]})]})]})]})})}),pagination.pages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"row mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Orders pagination\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"pagination justify-content-center\",children:[/*#__PURE__*/_jsx(\"li\",{className:`page-item ${pagination.current===1?'disabled':''}`,children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>fetchOrders(pagination.current-1),disabled:pagination.current===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-left\"})})}),[...Array(pagination.pages)].map((_,index)=>/*#__PURE__*/_jsx(\"li\",{className:`page-item ${pagination.current===index+1?'active':''}`,children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>fetchOrders(index+1),children:index+1})},index+1)),/*#__PURE__*/_jsx(\"li\",{className:`page-item ${pagination.current===pagination.pages?'disabled':''}`,children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>fetchOrders(pagination.current+1),disabled:pagination.current===pagination.pages,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-right\"})})})]})})})}),showModal&&selectedOrder&&/*#__PURE__*/_jsx(\"div\",{className:\"modal d-block\",tabIndex:\"-1\",style:{backgroundColor:'rgba(0,0,0,0.5)'},onClick:handleModalBackdropClick,ref:modalRef,children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg modal-dialog-scrollable\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header bg-primary text-white\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-receipt me-2\"}),\"Order Details - \",selectedOrder.orderNumber||selectedOrder.id]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close btn-close-white\",onClick:closeModal})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-light\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person me-2\"}),\"Student Information\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",selectedOrder.studentName]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"a\",{href:`mailto:${selectedOrder.email}`,className:\"text-decoration-none ms-1\",children:selectedOrder.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),/*#__PURE__*/_jsx(\"a\",{href:`tel:${selectedOrder.phone}`,className:\"text-decoration-none ms-1\",children:selectedOrder.phone})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-light\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-info-circle me-2\"}),\"Order Information\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Order ID:\"}),\" \",selectedOrder.id]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Order Number:\"}),\" \",selectedOrder.orderNumber||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(selectedOrder.orderDate).toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Updated:\"}),\" \",new Date(selectedOrder.lastUpdated).toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:`badge ${getStatusBadge(selectedOrder.status)} ms-2`,children:selectedOrder.status.charAt(0).toUpperCase()+selectedOrder.status.slice(1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Payment Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:`badge ${selectedOrder.paymentStatus==='completed'?'bg-success':'bg-warning'} ms-2`,children:selectedOrder.paymentStatus||'N/A'})]})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-light\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-book me-2\"}),\"Course Details\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title text-primary\",children:selectedOrder.course}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Subtotal:\"}),\" \\u20B9\",selectedOrder.subtotal||selectedOrder.amount]}),selectedOrder.tax>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tax (GST):\"}),\" \\u20B9\",selectedOrder.tax]}),selectedOrder.shipping>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Shipping:\"}),\" \\u20B9\",selectedOrder.shipping]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-success\",children:\"Total Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-success fw-bold ms-1\",children:[\"\\u20B9\",selectedOrder.amount]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Payment Method:\"}),\" \",selectedOrder.paymentMethod]}),selectedOrder.items&&selectedOrder.items.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Items:\"}),\" \",selectedOrder.items.length]})]})]})]})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:closeModal,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x me-2\"}),\"Close\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",children:getAvailableActions(selectedOrder.status,selectedOrder.paymentStatus).map((actionItem,index)=>/*#__PURE__*/_jsxs(\"button\",{className:`btn ${actionItem.action==='refund'?'btn-warning':actionItem.action==='pending'?'btn-success':actionItem.action==='completed'?'btn-success':actionItem.action==='cancelled'?'btn-danger':actionItem.action==='download'?'btn-info':'btn-primary'}`,onClick:()=>handleActionClick(selectedOrder.id,actionItem.action),children:[/*#__PURE__*/_jsx(\"i\",{className:`bi ${actionItem.action==='confirmed'?'bi-check-circle':actionItem.action==='processing'?'bi-arrow-repeat':actionItem.action==='completed'?'bi-check-circle-fill':actionItem.action==='cancelled'?'bi-x-circle':actionItem.action==='refund'?'bi-arrow-left-circle':actionItem.action==='download'?'bi-download':'bi-arrow-right'} me-2`}),actionItem.label]},index))})]})]})})}),showRefundModal&&selectedOrder&&/*#__PURE__*/_jsx(\"div\",{className:\"modal d-block\",tabIndex:\"-1\",style:{backgroundColor:'rgba(0,0,0,0.5)'},onClick:handleRefundModalBackdropClick,ref:refundModalRef,children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header bg-warning text-dark\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),\"Issue Refund\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:closeRefundModal})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),\"You are about to issue a refund for order \",selectedOrder.id,\" of $\",selectedOrder.amount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Refund Reason\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",rows:\"3\",placeholder:\"Enter reason for refund...\",value:refundReason,onChange:e=>setRefundReason(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:closeRefundModal,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-warning\",onClick:handleRefund,disabled:!refundReason.trim(),children:\"Issue Refund\"})]})]})})})]})]});};export default ManageOrders;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ManageOrders","orders","setOrders","filteredOrders","setFilteredOrders","statusFilter","setStatusFilter","searchTerm","setSearchTerm","selectedOrder","setSelectedOrder","showModal","setShowModal","showRefundModal","setShowRefundModal","refundReason","setRefundReason","loading","setLoading","error","setError","pagination","setPagination","current","pages","total","modalRef","refundModalRef","API_BASE_URL","process","env","REACT_APP_API_URL","fetchOrders","page","arguments","length","undefined","limit","token","localStorage","getItem","Error","response","get","headers","params","status","search","data","success","ordersData","map","order","customerInfo","user","studentName","firstName","lastName","trim","username","email","course","items","Array","isArray","item","_item$course","title","join","pricing","payment","id","_id","orderNumber","orderDate","Date","createdAt","toISOString","split","amount","paymentMethod","method","phone","lastUpdated","updatedAt","paymentStatus","subtotal","tax","shipping","rawOrder","message","_error$response","_error$response$data","_error$response2","console","removeItem","window","location","href","updateOrderStatusOnBackend","orderId","newStatus","put","timeoutId","setTimeout","clearTimeout","filterOrdersLocally","filtered","filter","searchLower","toLowerCase","_order$orderNumber","includes","getStatusBadge","statusClasses","pending","confirmed","processing","completed","cancelled","refunded","getAvailableActions","actions","push","action","label","className","updateOrderStatus","updatedOrder","prevOrders","alert","generateReceiptHTML","_order$items","toLocaleDateString","charAt","toUpperCase","slice","_item$course2","quantity","price","toLocaleString","downloadReceipt","receiptHTML","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","handleActionClick","find","o","handleRefund","handleViewOrder","closeModal","closeRefundModal","handleModalBackdropClick","e","target","currentTarget","handleRefundModalBackdropClick","getOrderStats","stats","exportOrdersToCSV","csvContent","children","rel","onClick","disabled","role","style","background","placeholder","value","onChange","index","maxWidth","toLocaleTimeString","fontSize","actionItem","idx","_","tabIndex","backgroundColor","ref","rows"],"sources":["D:/Edu Project/admin-frontend/src/pages/ManageOrders.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ManageOrders = () => {\r\n    const [orders, setOrders] = useState([]);\r\n    const [filteredOrders, setFilteredOrders] = useState([]);\r\n    const [statusFilter, setStatusFilter] = useState('all');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedOrder, setSelectedOrder] = useState(null);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [showRefundModal, setShowRefundModal] = useState(false);\r\n    const [refundReason, setRefundReason] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [pagination, setPagination] = useState({ current: 1, pages: 1, total: 0 });\r\n    const modalRef = useRef(null);\r\n    const refundModalRef = useRef(null);\r\n\r\n    // API base URL - adjust according to your setup\r\n    const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n    // Fetch orders from backend\r\n    const fetchOrders = async (page = 1, limit = 10) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            // Get token from localStorage or wherever you store it\r\n            const token = localStorage.getItem('token') || localStorage.getItem('adminToken');\r\n\r\n            if (!token) {\r\n                throw new Error('Authentication token not found');\r\n            }\r\n\r\n            const response = await axios.get(`${API_BASE_URL}/orders/admin`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                params: {\r\n                    page,\r\n                    limit,\r\n                    status: statusFilter !== 'all' ? statusFilter : undefined,\r\n                    search: searchTerm || undefined\r\n                }\r\n            });\r\n\r\n            if (response.data.success) {\r\n                const ordersData = response.data.orders.map(order => {\r\n                    // Safely extract customer info\r\n                    const customerInfo = order.customerInfo || {};\r\n                    const user = order.user || {};\r\n                    \r\n                    // Build student name with proper null checking\r\n                    let studentName = 'N/A';\r\n                    if (customerInfo.firstName || customerInfo.lastName) {\r\n                        studentName = `${customerInfo.firstName || ''} ${customerInfo.lastName || ''}`.trim();\r\n                    } else if (user.firstName || user.lastName) {\r\n                        studentName = `${user.firstName || ''} ${user.lastName || ''}`.trim();\r\n                    } else if (user.username) {\r\n                        studentName = user.username;\r\n                    }\r\n                    \r\n                    // Safely extract email\r\n                    const email = customerInfo.email || user.email || 'N/A';\r\n                    \r\n                    // Safely extract course information\r\n                    const course = order.items && Array.isArray(order.items) \r\n                        ? order.items.map(item => item.course?.title || 'Unknown Course').join(', ') \r\n                        : 'N/A';\r\n                    \r\n                    // Safely extract pricing information\r\n                    const pricing = order.pricing || {};\r\n                    const payment = order.payment || {};\r\n                    \r\n                    return {\r\n                        id: order._id,\r\n                        orderNumber: order.orderNumber,\r\n                        studentName,\r\n                        email,\r\n                        course,\r\n                        orderDate: new Date(order.createdAt).toISOString().split('T')[0],\r\n                        amount: pricing.total || 0,\r\n                        status: order.status,\r\n                        paymentMethod: payment.method || 'N/A',\r\n                        phone: customerInfo.phone || 'N/A',\r\n                        lastUpdated: order.updatedAt,\r\n                        // Additional backend data\r\n                        paymentStatus: payment.status,\r\n                        subtotal: pricing.subtotal || 0,\r\n                        tax: pricing.tax || 0,\r\n                        shipping: pricing.shipping || 0,\r\n                        items: order.items || [],\r\n                        customerInfo: customerInfo,\r\n                        rawOrder: order // Keep full order data for detailed view\r\n                    };\r\n                });\r\n\r\n                setOrders(ordersData);\r\n                setFilteredOrders(ordersData);\r\n\r\n                if (response.data.pagination) {\r\n                    setPagination(response.data.pagination);\r\n                }\r\n            } else {\r\n                throw new Error(response.data.message || 'Failed to fetch orders');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching orders:', error);\r\n            setError(error.response?.data?.message || error.message || 'Failed to fetch orders');\r\n\r\n            // If it's an auth error, redirect to login\r\n            if (error.response?.status === 401) {\r\n                localStorage.removeItem('token');\r\n                localStorage.removeItem('adminToken');\r\n                window.location.href = '/admin/login';\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Update order status on backend\r\n    const updateOrderStatusOnBackend = async (orderId, newStatus, refundReason = null) => {\r\n        try {\r\n            const token = localStorage.getItem('token') || localStorage.getItem('adminToken');\r\n\r\n            if (!token) {\r\n                throw new Error('Authentication token not found');\r\n            }\r\n\r\n            const response = await axios.put(`${API_BASE_URL}/orders/admin/${orderId}/status`, {\r\n                status: newStatus,\r\n                refundReason: refundReason\r\n            }, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n\r\n            if (response.data.success) {\r\n                return response.data.order;\r\n            } else {\r\n                throw new Error(response.data.message || 'Failed to update order status');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating order status:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    // Initial fetch\r\n    useEffect(() => {\r\n        fetchOrders();\r\n    }, []);\r\n\r\n    // Filter orders when statusFilter or searchTerm changes\r\n    useEffect(() => {\r\n        // If we're using backend filtering, refetch data\r\n        // Otherwise, filter locally\r\n        if (statusFilter !== 'all' || searchTerm) {\r\n            // Debounce search to avoid too many API calls\r\n            const timeoutId = setTimeout(() => {\r\n                fetchOrders(1); // Reset to page 1 when filtering\r\n            }, 500);\r\n\r\n            return () => clearTimeout(timeoutId);\r\n        } else {\r\n            fetchOrders(1);\r\n        }\r\n    }, [statusFilter, searchTerm]);\r\n\r\n    // Local filtering (if you prefer client-side filtering)\r\n    const filterOrdersLocally = () => {\r\n        let filtered = orders;\r\n\r\n        if (statusFilter !== 'all') {\r\n            filtered = filtered.filter(order => order.status === statusFilter);\r\n        }\r\n\r\n        if (searchTerm) {\r\n            const searchLower = searchTerm.toLowerCase();\r\n            filtered = filtered.filter(order =>\r\n                order.id.toLowerCase().includes(searchLower) ||\r\n                order.orderNumber?.toLowerCase().includes(searchLower) ||\r\n                order.studentName.toLowerCase().includes(searchLower) ||\r\n                order.course.toLowerCase().includes(searchLower) ||\r\n                order.email.toLowerCase().includes(searchLower)\r\n            );\r\n        }\r\n\r\n        setFilteredOrders(filtered);\r\n    };\r\n\r\n    const getStatusBadge = (status) => {\r\n        const statusClasses = {\r\n            pending: 'bg-warning',\r\n            confirmed: 'bg-info',\r\n            processing: 'bg-info',\r\n            completed: 'bg-success',\r\n            cancelled: 'bg-danger',\r\n            refunded: 'bg-secondary'\r\n        };\r\n        return statusClasses[status] || 'bg-secondary';\r\n    };\r\n\r\n    const getAvailableActions = (status, paymentStatus) => {\r\n        const actions = [];\r\n\r\n        switch (status) {\r\n            case 'pending':\r\n                actions.push(\r\n                    { action: 'confirmed', label: 'Confirm Order', className: 'dropdown-item' },\r\n                    { action: 'cancelled', label: 'Cancel Order', className: 'dropdown-item text-danger' }\r\n                );\r\n                break;\r\n            case 'confirmed':\r\n                actions.push(\r\n                    { action: 'processing', label: 'Mark Processing', className: 'dropdown-item' },\r\n                    { action: 'completed', label: 'Mark Completed', className: 'dropdown-item' },\r\n                    { action: 'cancelled', label: 'Cancel Order', className: 'dropdown-item text-danger' }\r\n                );\r\n                break;\r\n            case 'processing':\r\n                actions.push(\r\n                    { action: 'completed', label: 'Mark Completed', className: 'dropdown-item' },\r\n                    { action: 'cancelled', label: 'Cancel Order', className: 'dropdown-item text-danger' }\r\n                );\r\n                break;\r\n            case 'completed':\r\n                if (paymentStatus === 'completed') {\r\n                    actions.push(\r\n                        { action: 'refund', label: 'Issue Refund', className: 'dropdown-item text-warning' }\r\n                    );\r\n                }\r\n                actions.push(\r\n                    { action: 'download', label: 'Download Receipt', className: 'dropdown-item' }\r\n                );\r\n                break;\r\n            case 'cancelled':\r\n                if (paymentStatus !== 'completed') {\r\n                    actions.push(\r\n                        { action: 'pending', label: 'Reactivate Order', className: 'dropdown-item text-success' }\r\n                    );\r\n                }\r\n                break;\r\n            case 'refunded':\r\n                actions.push(\r\n                    { action: 'download', label: 'Download Receipt', className: 'dropdown-item' }\r\n                );\r\n                break;\r\n        }\r\n\r\n        return actions;\r\n    };\r\n\r\n    const updateOrderStatus = async (orderId, newStatus) => {\r\n        try {\r\n            setLoading(true);\r\n\r\n            // Update on backend\r\n            const updatedOrder = await updateOrderStatusOnBackend(orderId, newStatus);\r\n\r\n            // Update local state\r\n            setOrders(prevOrders =>\r\n                prevOrders.map(order =>\r\n                    order.id === orderId\r\n                        ? {\r\n                            ...order,\r\n                            status: newStatus,\r\n                            lastUpdated: new Date().toISOString()\r\n                        }\r\n                        : order\r\n                )\r\n            );\r\n\r\n            setShowModal(false);\r\n\r\n            // Show success message\r\n            alert(`Order ${orderId} status updated to ${newStatus}`);\r\n\r\n        } catch (error) {\r\n            alert(`Failed to update order status: ${error.message}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const generateReceiptHTML = (order) => {\r\n        return `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n            <title>Receipt - ${order.orderNumber || order.id}</title>\r\n            <style>\r\n                body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }\r\n                .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }\r\n                .order-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }\r\n                .table { width: 100%; border-collapse: collapse; margin: 20px 0; }\r\n                .table th, .table td { border: 1px solid #ddd; padding: 12px; text-align: left; }\r\n                .table th { background-color: #f8f9fa; }\r\n                .pricing { margin-top: 20px; }\r\n                .pricing-row { display: flex; justify-content: space-between; padding: 5px 0; }\r\n                .total { font-size: 1.2em; font-weight: bold; border-top: 2px solid #333; padding-top: 10px; }\r\n                .footer { margin-top: 40px; text-align: center; color: #666; font-size: 0.9em; }\r\n            </style>\r\n        </head>\r\n        <body>\r\n            <div class=\"header\">\r\n                <h1>Course Order Receipt</h1>\r\n                <p>Thank you for your purchase!</p>\r\n            </div>\r\n            \r\n            <div class=\"order-info\">\r\n                <div>\r\n                    <h3>Order Details</h3>\r\n                    <p><strong>Order ID:</strong> ${order.orderNumber || order.id}</p>\r\n                    <p><strong>Date:</strong> ${new Date(order.orderDate).toLocaleDateString()}</p>\r\n                    <p><strong>Status:</strong> ${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</p>\r\n                    <p><strong>Payment Status:</strong> ${(order.paymentStatus || '').charAt(0).toUpperCase() + (order.paymentStatus || '').slice(1)}</p>\r\n                </div>\r\n                <div>\r\n                    <h3>Student Information</h3>\r\n                    <p><strong>Name:</strong> ${order.studentName}</p>\r\n                    <p><strong>Email:</strong> ${order.email}</p>\r\n                    <p><strong>Phone:</strong> ${order.phone}</p>\r\n                </div>\r\n            </div>\r\n            \r\n            <h3>Courses Purchased</h3>\r\n            <table class=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Course</th>\r\n                        <th>Quantity</th>\r\n                        <th>Price</th>\r\n                        <th>Total</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    ${order.items?.map(item => `\r\n                        <tr>\r\n                            <td>${item.course?.title || 'Unknown Course'}</td>\r\n                            <td>${item.quantity || 1}</td>\r\n                            <td>₹${item.price || 0}</td>\r\n                            <td>₹${(item.price || 0) * (item.quantity || 1)}</td>\r\n                        </tr>\r\n                    `).join('') || `\r\n                        <tr>\r\n                            <td colspan=\"4\">No course details available</td>\r\n                        </tr>\r\n                    `}\r\n                </tbody>\r\n            </table>\r\n            \r\n            <div class=\"pricing\">\r\n                <div class=\"pricing-row\">\r\n                    <span>Subtotal:</span>\r\n                    <span>₹${order.subtotal || 0}</span>\r\n                </div>\r\n                ${order.shipping > 0 ? `\r\n                <div class=\"pricing-row\">\r\n                    <span>Shipping:</span>\r\n                    <span>₹${order.shipping}</span>\r\n                </div>\r\n                ` : ''}\r\n                ${order.tax > 0 ? `\r\n                <div class=\"pricing-row\">\r\n                    <span>Tax (GST):</span>\r\n                    <span>₹${order.tax}</span>\r\n                </div>\r\n                ` : ''}\r\n                <div class=\"pricing-row total\">\r\n                    <span>Total Amount:</span>\r\n                    <span>₹${order.amount}</span>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class=\"footer\">\r\n                <p>Generated on ${new Date().toLocaleString()}</p>\r\n                <p>This is an automatically generated receipt.</p>\r\n                <p>Payment Method: ${order.paymentMethod}</p>\r\n            </div>\r\n        </body>\r\n        </html>\r\n        `;\r\n    };\r\n\r\n    const downloadReceipt = (order) => {\r\n        const receiptHTML = generateReceiptHTML(order);\r\n        const blob = new Blob([receiptHTML], { type: 'text/html' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `receipt-${order.orderNumber || order.id}.html`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const handleActionClick = (orderId, action) => {\r\n        const order = orders.find(o => o.id === orderId);\r\n\r\n        switch (action) {\r\n            case 'refund':\r\n                setSelectedOrder(order);\r\n                setShowRefundModal(true);\r\n                break;\r\n            case 'download':\r\n                if (order) {\r\n                    downloadReceipt(order);\r\n                }\r\n                break;\r\n            default:\r\n                updateOrderStatus(orderId, action);\r\n        }\r\n    };\r\n\r\n    const handleRefund = async () => {\r\n        if (selectedOrder && refundReason.trim()) {\r\n            try {\r\n                await updateOrderStatusOnBackend(selectedOrder.id, 'refunded', refundReason);\r\n                updateOrderStatus(selectedOrder.id, 'refunded');\r\n                setShowRefundModal(false);\r\n                setRefundReason('');\r\n                alert(`Refund processed for ${selectedOrder.orderNumber || selectedOrder.id}. Reason: ${refundReason}`);\r\n            } catch (error) {\r\n                alert(`Failed to process refund: ${error.message}`);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleViewOrder = (order) => {\r\n        setSelectedOrder(order);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const closeModal = () => {\r\n        setShowModal(false);\r\n        setSelectedOrder(null);\r\n    };\r\n\r\n    const closeRefundModal = () => {\r\n        setShowRefundModal(false);\r\n        setRefundReason('');\r\n        setSelectedOrder(null);\r\n    };\r\n\r\n    const handleModalBackdropClick = (e) => {\r\n        if (e.target === e.currentTarget) {\r\n            closeModal();\r\n        }\r\n    };\r\n\r\n    const handleRefundModalBackdropClick = (e) => {\r\n        if (e.target === e.currentTarget) {\r\n            closeRefundModal();\r\n        }\r\n    };\r\n\r\n    const getOrderStats = () => {\r\n        const stats = {\r\n            total: orders.length,\r\n            completed: orders.filter(o => o.status === 'completed').length,\r\n            pending: orders.filter(o => o.status === 'pending').length,\r\n            confirmed: orders.filter(o => o.status === 'confirmed').length,\r\n            processing: orders.filter(o => o.status === 'processing').length,\r\n            cancelled: orders.filter(o => o.status === 'cancelled').length,\r\n            refunded: orders.filter(o => o.status === 'refunded').length\r\n        };\r\n        return stats;\r\n    };\r\n\r\n    const exportOrdersToCSV = () => {\r\n        const headers = [\r\n            'Order Number', 'Order ID', 'Student Name', 'Email', 'Course',\r\n            'Order Date', 'Amount', 'Status', 'Payment Status', 'Payment Method',\r\n            'Phone', 'Last Updated'\r\n        ];\r\n\r\n        const csvContent = [\r\n            headers.join(','),\r\n            ...filteredOrders.map(order => [\r\n                order.orderNumber || order.id,\r\n                order.id,\r\n                `\"${order.studentName}\"`,\r\n                order.email,\r\n                `\"${order.course}\"`,\r\n                order.orderDate,\r\n                order.amount,\r\n                order.status,\r\n                order.paymentStatus || '',\r\n                order.paymentMethod,\r\n                order.phone,\r\n                order.lastUpdated\r\n            ].join(','))\r\n        ].join('\\n');\r\n\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `orders-export-${new Date().toISOString().split('T')[0]}.csv`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // Calculate stats\r\n    const stats = getOrderStats();\r\n\r\n    return (\r\n        <>\r\n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css\" />\r\n            <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n\r\n            <div className=\"container-fluid py-4\">\r\n                {/* Header */}\r\n                <div className=\"row mb-4\">\r\n                    <div className=\"col-12\">\r\n                        <div className=\"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center\">\r\n                            <div>\r\n                                <h1 className=\"h3 mb-1 text-primary\">\r\n                                    <i className=\"bi bi-cart-check me-2\"></i>\r\n                                    Order Management\r\n                                </h1>\r\n                                <p className=\"text-muted mb-3 mb-md-0\">Manage and track all course orders efficiently</p>\r\n                            </div>\r\n                            <div className=\"d-flex gap-2 flex-wrap\">\r\n                                <button\r\n                                    className=\"btn btn-outline-success\"\r\n                                    onClick={exportOrdersToCSV}\r\n                                    title=\"Export orders to CSV\"\r\n                                >\r\n                                    <i className=\"bi bi-download me-2\"></i>\r\n                                    Export CSV\r\n                                </button>\r\n                                <button\r\n                                    className=\"btn btn-outline-info\"\r\n                                    onClick={() => fetchOrders()}\r\n                                    disabled={loading}\r\n                                    title=\"Refresh orders\"\r\n                                >\r\n                                    <i className={`bi ${loading ? 'bi-arrow-repeat spinner-border spinner-border-sm' : 'bi-arrow-clockwise'} me-2`}></i>\r\n                                    Refresh\r\n                                </button>\r\n                                <button className=\"btn btn-primary\">\r\n                                    <i className=\"bi bi-plus-circle me-2\"></i>\r\n                                    Manual Order\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Error Alert */}\r\n                {error && (\r\n                    <div className=\"row mb-4\">\r\n                        <div className=\"col-12\">\r\n                            <div className=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\r\n                                <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n                                <strong>Error:</strong> {error}\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn-close\"\r\n                                    onClick={() => setError(null)}\r\n                                    aria-label=\"Close\"\r\n                                ></button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Statistics Cards */}\r\n                <div className=\"row mb-4\">\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Total Orders</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.total}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-cart3 fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Completed</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.completed}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-check-circle fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Pending</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.pending}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-clock fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Processing</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.processing}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-arrow-repeat fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2 mb-3 mb-lg-0\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Cancelled</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.cancelled}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-x-circle fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-6 col-lg-2\">\r\n                        <div className=\"card bg-gradient text-dark h-100\" style={{ background: 'linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%)' }}>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div>\r\n                                        <h6 className=\"card-title mb-0\">Refunded</h6>\r\n                                        <h3 className=\"mb-0 fw-bold\">{stats.refunded}</h3>\r\n                                    </div>\r\n                                    <i className=\"bi bi-arrow-left-circle fs-2 opacity-75\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {/* Filters and Search */}\r\n                <div className=\"row mb-4\">\r\n                    <div className=\"col-12\">\r\n                        <div className=\"card shadow-sm\">\r\n                            <div className=\"card-header bg-light\">\r\n                                <h5 className=\"card-title mb-0\">\r\n                                    <i className=\"bi bi-funnel me-2\"></i>\r\n                                    Filters & Search\r\n                                </h5>\r\n                            </div>\r\n                            <div className=\"card-body\">\r\n                                <div className=\"row g-3\">\r\n                                    <div className=\"col-12 col-md-6 col-lg-5\">\r\n                                        <label className=\"form-label fw-semibold\">\r\n                                            <i className=\"bi bi-search me-1\"></i>\r\n                                            Search Orders\r\n                                        </label>\r\n                                        <div className=\"input-group\">\r\n                                            <span className=\"input-group-text bg-light\">\r\n                                                <i className=\"bi bi-search text-muted\"></i>\r\n                                            </span>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                className=\"form-control\"\r\n                                                placeholder=\"Search by Order ID, Student, Email, or Course\"\r\n                                                value={searchTerm}\r\n                                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                                            />\r\n                                            {searchTerm && (\r\n                                                <button\r\n                                                    className=\"btn btn-outline-secondary\"\r\n                                                    onClick={() => setSearchTerm('')}\r\n                                                    title=\"Clear search\"\r\n                                                >\r\n                                                    <i className=\"bi bi-x\"></i>\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-12 col-md-6 col-lg-3\">\r\n                                        <label className=\"form-label fw-semibold\">\r\n                                            <i className=\"bi bi-filter me-1\"></i>\r\n                                            Filter by Status\r\n                                        </label>\r\n                                        <select\r\n                                            className=\"form-select\"\r\n                                            value={statusFilter}\r\n                                            onChange={(e) => setStatusFilter(e.target.value)}\r\n                                        >\r\n                                            <option value=\"all\">All Status</option>\r\n                                            <option value=\"pending\">Pending</option>\r\n                                            <option value=\"confirmed\">Confirmed</option>\r\n                                            <option value=\"processing\">Processing</option>\r\n                                            <option value=\"completed\">Completed</option>\r\n                                            <option value=\"cancelled\">Cancelled</option>\r\n                                            <option value=\"refunded\">Refunded</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className=\"col-12 col-lg-4 d-flex align-items-end\">\r\n                                        <div className=\"d-flex gap-2 w-100\">\r\n                                            <button\r\n                                                className=\"btn btn-outline-secondary flex-grow-1\"\r\n                                                onClick={() => {\r\n                                                    setSearchTerm('');\r\n                                                    setStatusFilter('all');\r\n                                                }}\r\n                                            >\r\n                                                <i className=\"bi bi-arrow-clockwise me-2\"></i>\r\n                                                Reset Filters\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"btn btn-info\"\r\n                                                onClick={() => fetchOrders()}\r\n                                                disabled={loading}\r\n                                                title=\"Apply filters\"\r\n                                            >\r\n                                                <i className={`bi ${loading ? 'bi-arrow-repeat spinner-border spinner-border-sm' : 'bi-check2'}`}></i>\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Loading Indicator */}\r\n                {loading && (\r\n                    <div className=\"row mb-4\">\r\n                        <div className=\"col-12\">\r\n                            <div className=\"text-center\">\r\n                                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                                    <span className=\"visually-hidden\">Loading...</span>\r\n                                </div>\r\n                                <p className=\"mt-2 text-muted\">Loading orders...</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Orders Table */}\r\n                <div className=\"row\">\r\n                    <div className=\"col-12\">\r\n                        <div className=\"card shadow-sm\">\r\n                            <div className=\"card-header bg-light d-flex justify-content-between align-items-center\">\r\n                                <h5 className=\"card-title mb-0\">\r\n                                    <i className=\"bi bi-table me-2\"></i>\r\n                                    Orders ({filteredOrders.length})\r\n                                </h5>\r\n                                <div className=\"d-flex gap-2\">\r\n                                    <span className=\"badge bg-primary\">\r\n                                        Showing {filteredOrders.length} of {pagination.total || orders.length}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"card-body p-0\">\r\n                                <div className=\"table-responsive\">\r\n                                    <table className=\"table table-hover mb-0\">\r\n                                        <thead className=\"table-dark\">\r\n                                            <tr>\r\n                                                <th className=\"text-center\">#</th>\r\n                                                <th>Order ID</th>\r\n                                                <th>Student</th>\r\n                                                <th className=\"d-none d-md-table-cell\">Course</th>\r\n                                                <th className=\"d-none d-lg-table-cell\">Date</th>\r\n                                                <th>Amount</th>\r\n                                                <th>Status</th>\r\n                                                <th className=\"text-center\">Actions</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            {filteredOrders.map((order, index) => (\r\n                                                <tr key={order.id} className=\"align-middle\">\r\n                                                    <td className=\"text-center text-muted fw-semibold\">\r\n                                                        {index + 1}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div>\r\n                                                            <strong className=\"text-primary\">{order.orderNumber || order.id}</strong>\r\n                                                            <br />\r\n                                                            <small className=\"text-muted\">{order.id}</small>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div>\r\n                                                            <div className=\"fw-semibold\">{order.studentName}</div>\r\n                                                            <small className=\"text-muted\">{order.email}</small>\r\n                                                            <small className=\"text-muted d-block d-md-none\">\r\n                                                                <i className=\"bi bi-book me-1\"></i>\r\n                                                                {order.course}\r\n                                                            </small>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td className=\"d-none d-md-table-cell\">\r\n                                                        <div\r\n                                                            className=\"text-truncate\"\r\n                                                            style={{ maxWidth: '200px' }}\r\n                                                            title={order.course}\r\n                                                        >\r\n                                                            <i className=\"bi bi-book text-muted me-1\"></i>\r\n                                                            {order.course}\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td className=\"d-none d-lg-table-cell\">\r\n                                                        <div>\r\n                                                            <div>{new Date(order.orderDate).toLocaleDateString()}</div>\r\n                                                            <small className=\"text-muted\">\r\n                                                                {new Date(order.orderDate).toLocaleTimeString()}\r\n                                                            </small>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div>\r\n                                                            <strong className=\"text-success\">₹{order.amount}</strong>\r\n                                                            <br />\r\n                                                            <small className=\"text-muted\">{order.paymentMethod}</small>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <span className={`badge ${getStatusBadge(order.status)} fs-6 px-3 py-2`}>\r\n                                                            <i className=\"bi bi-circle-fill me-1\" style={{ fontSize: '0.5rem' }}></i>\r\n                                                            {order.status.charAt(0).toUpperCase() + order.status.slice(1)}\r\n                                                        </span>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div className=\"d-flex gap-1 justify-content-center\">\r\n                                                            <button\r\n                                                                className=\"btn btn-sm btn-outline-primary\"\r\n                                                                onClick={() => handleViewOrder(order)}\r\n                                                                title=\"View order details\"\r\n                                                            >\r\n                                                                <i className=\"bi bi-eye\"></i>\r\n                                                            </button>\r\n                                                            {getAvailableActions(order.status, order.paymentStatus).length > 0 && (\r\n                                                                <div className=\"btn-group\">\r\n                                                                    <button\r\n                                                                        className=\"btn btn-sm btn-outline-secondary dropdown-toggle\"\r\n                                                                        type=\"button\"\r\n                                                                        data-bs-toggle=\"dropdown\"\r\n                                                                        aria-expanded=\"false\"\r\n                                                                        title=\"More actions\"\r\n                                                                    >\r\n                                                                        <i className=\"bi bi-three-dots-vertical\"></i>\r\n                                                                    </button>\r\n                                                                    <ul className=\"dropdown-menu\">\r\n                                                                        {getAvailableActions(order.status, order.paymentStatus).map((actionItem, idx) => (\r\n                                                                            <li key={idx}>\r\n                                                                                <button\r\n                                                                                    className={actionItem.className}\r\n                                                                                    onClick={() => handleActionClick(order.id, actionItem.action)}\r\n                                                                                >\r\n                                                                                    <i className={`bi ${actionItem.action === 'confirmed' ? 'bi-check-circle' :\r\n                                                                                        actionItem.action === 'processing' ? 'bi-arrow-repeat' :\r\n                                                                                            actionItem.action === 'completed' ? 'bi-check-circle-fill' :\r\n                                                                                                actionItem.action === 'cancelled' ? 'bi-x-circle' :\r\n                                                                                                    actionItem.action === 'refund' ? 'bi-arrow-left-circle' :\r\n                                                                                                        actionItem.action === 'download' ? 'bi-download' :\r\n                                                                                                            'bi-arrow-right'\r\n                                                                                        } me-2`}></i>\r\n                                                                                    {actionItem.label}\r\n                                                                                </button>\r\n                                                                            </li>\r\n                                                                        ))}\r\n                                                                    </ul>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            ))}\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                                {/* Empty State */}\r\n                                {!loading && filteredOrders.length === 0 && (\r\n                                    <div className=\"text-center py-5\">\r\n                                        <i className=\"bi bi-inbox display-1 text-muted\"></i>\r\n                                        <h5 className=\"mt-3 text-muted\">No orders found</h5>\r\n                                        <p className=\"text-muted\">\r\n                                            {searchTerm || statusFilter !== 'all'\r\n                                                ? 'Try adjusting your search criteria or filters'\r\n                                                : 'No orders have been placed yet'\r\n                                            }\r\n                                        </p>\r\n                                        {(searchTerm || statusFilter !== 'all') && (\r\n                                            <button\r\n                                                className=\"btn btn-outline-primary\"\r\n                                                onClick={() => {\r\n                                                    setSearchTerm('');\r\n                                                    setStatusFilter('all');\r\n                                                }}\r\n                                            >\r\n                                                <i className=\"bi bi-arrow-clockwise me-2\"></i>\r\n                                                Clear Filters\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Pagination */}\r\n                {pagination.pages > 1 && (\r\n                    <div className=\"row mt-4\">\r\n                        <div className=\"col-12\">\r\n                            <nav aria-label=\"Orders pagination\">\r\n                                <ul className=\"pagination justify-content-center\">\r\n                                    <li className={`page-item ${pagination.current === 1 ? 'disabled' : ''}`}>\r\n                                        <button\r\n                                            className=\"page-link\"\r\n                                            onClick={() => fetchOrders(pagination.current - 1)}\r\n                                            disabled={pagination.current === 1}\r\n                                        >\r\n                                            <i className=\"bi bi-chevron-left\"></i>\r\n                                        </button>\r\n                                    </li>\r\n                                    {[...Array(pagination.pages)].map((_, index) => (\r\n                                        <li key={index + 1} className={`page-item ${pagination.current === index + 1 ? 'active' : ''}`}>\r\n                                            <button\r\n                                                className=\"page-link\"\r\n                                                onClick={() => fetchOrders(index + 1)}\r\n                                            >\r\n                                                {index + 1}\r\n                                            </button>\r\n                                        </li>\r\n                                    ))}\r\n                                    <li className={`page-item ${pagination.current === pagination.pages ? 'disabled' : ''}`}>\r\n                                        <button\r\n                                            className=\"page-link\"\r\n                                            onClick={() => fetchOrders(pagination.current + 1)}\r\n                                            disabled={pagination.current === pagination.pages}\r\n                                        >\r\n                                            <i className=\"bi bi-chevron-right\"></i>\r\n                                        </button>\r\n                                    </li>\r\n                                </ul>\r\n                            </nav>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Order Details Modal */}\r\n                {showModal && selectedOrder && (\r\n                    <div\r\n                        className=\"modal d-block\"\r\n                        tabIndex=\"-1\"\r\n                        style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}\r\n                        onClick={handleModalBackdropClick}\r\n                        ref={modalRef}\r\n                    >\r\n                        <div className=\"modal-dialog modal-lg modal-dialog-scrollable\">\r\n                            <div className=\"modal-content\">\r\n                                <div className=\"modal-header bg-primary text-white\">\r\n                                    <h5 className=\"modal-title\">\r\n                                        <i className=\"bi bi-receipt me-2\"></i>\r\n                                        Order Details - {selectedOrder.orderNumber || selectedOrder.id}\r\n                                    </h5>\r\n                                    <button type=\"button\" className=\"btn-close btn-close-white\" onClick={closeModal}></button>\r\n                                </div>\r\n                                <div className=\"modal-body\">\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-md-6\">\r\n                                            <div className=\"card mb-3\">\r\n                                                <div className=\"card-header bg-light\">\r\n                                                    <h6 className=\"mb-0\">\r\n                                                        <i className=\"bi bi-person me-2\"></i>\r\n                                                        Student Information\r\n                                                    </h6>\r\n                                                </div>\r\n                                                <div className=\"card-body\">\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Name:</strong> {selectedOrder.studentName}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Email:</strong>\r\n                                                        <a href={`mailto:${selectedOrder.email}`} className=\"text-decoration-none ms-1\">\r\n                                                            {selectedOrder.email}\r\n                                                        </a>\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Phone:</strong>\r\n                                                        <a href={`tel:${selectedOrder.phone}`} className=\"text-decoration-none ms-1\">\r\n                                                            {selectedOrder.phone}\r\n                                                        </a>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-md-6\">\r\n                                            <div className=\"card mb-3\">\r\n                                                <div className=\"card-header bg-light\">\r\n                                                    <h6 className=\"mb-0\">\r\n                                                        <i className=\"bi bi-info-circle me-2\"></i>\r\n                                                        Order Information\r\n                                                    </h6>\r\n                                                </div>\r\n                                                <div className=\"card-body\">\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Order ID:</strong> {selectedOrder.id}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Order Number:</strong> {selectedOrder.orderNumber || 'N/A'}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Date:</strong> {new Date(selectedOrder.orderDate).toLocaleString()}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Last Updated:</strong> {new Date(selectedOrder.lastUpdated).toLocaleString()}\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Status:</strong>\r\n                                                        <span className={`badge ${getStatusBadge(selectedOrder.status)} ms-2`}>\r\n                                                            {selectedOrder.status.charAt(0).toUpperCase() + selectedOrder.status.slice(1)}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <div className=\"mb-2\">\r\n                                                        <strong>Payment Status:</strong>\r\n                                                        <span className={`badge ${selectedOrder.paymentStatus === 'completed' ? 'bg-success' : 'bg-warning'} ms-2`}>\r\n                                                            {selectedOrder.paymentStatus || 'N/A'}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-12\">\r\n                                            <div className=\"card\">\r\n                                                <div className=\"card-header bg-light\">\r\n                                                    <h6 className=\"mb-0\">\r\n                                                        <i className=\"bi bi-book me-2\"></i>\r\n                                                        Course Details\r\n                                                    </h6>\r\n                                                </div>\r\n                                                <div className=\"card-body\">\r\n                                                    <h6 className=\"card-title text-primary\">{selectedOrder.course}</h6>\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\"col-6\">\r\n                                                            <div className=\"mb-2\">\r\n                                                                <strong>Subtotal:</strong> ₹{selectedOrder.subtotal || selectedOrder.amount}\r\n                                                            </div>\r\n                                                            {selectedOrder.tax > 0 && (\r\n                                                                <div className=\"mb-2\">\r\n                                                                    <strong>Tax (GST):</strong> ₹{selectedOrder.tax}\r\n                                                                </div>\r\n                                                            )}\r\n                                                            {selectedOrder.shipping > 0 && (\r\n                                                                <div className=\"mb-2\">\r\n                                                                    <strong>Shipping:</strong> ₹{selectedOrder.shipping}\r\n                                                                </div>\r\n                                                            )}\r\n                                                            <div className=\"mb-2\">\r\n                                                                <strong className=\"text-success\">Total Amount:</strong>\r\n                                                                <span className=\"text-success fw-bold ms-1\">₹{selectedOrder.amount}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"col-6\">\r\n                                                            <div className=\"mb-2\">\r\n                                                                <strong>Payment Method:</strong> {selectedOrder.paymentMethod}\r\n                                                            </div>\r\n                                                            {selectedOrder.items && selectedOrder.items.length > 0 && (\r\n                                                                <div className=\"mb-2\">\r\n                                                                    <strong>Items:</strong> {selectedOrder.items.length}\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"modal-footer\">\r\n                                    <button type=\"button\" className=\"btn btn-secondary\" onClick={closeModal}>\r\n                                        <i className=\"bi bi-x me-2\"></i>\r\n                                        Close\r\n                                    </button>\r\n                                    <div className=\"btn-group\">\r\n                                        {getAvailableActions(selectedOrder.status, selectedOrder.paymentStatus).map((actionItem, index) => (\r\n                                            <button\r\n                                                key={index}\r\n                                                className={`btn ${actionItem.action === 'refund' ? 'btn-warning' :\r\n                                                    actionItem.action === 'pending' ? 'btn-success' :\r\n                                                        actionItem.action === 'completed' ? 'btn-success' :\r\n                                                            actionItem.action === 'cancelled' ? 'btn-danger' :\r\n                                                                actionItem.action === 'download' ? 'btn-info' :\r\n                                                                    'btn-primary'\r\n                                                    }`}\r\n                                                onClick={() => handleActionClick(selectedOrder.id, actionItem.action)}\r\n                                            >\r\n                                                <i className={`bi ${actionItem.action === 'confirmed' ? 'bi-check-circle' :\r\n                                                    actionItem.action === 'processing' ? 'bi-arrow-repeat' :\r\n                                                        actionItem.action === 'completed' ? 'bi-check-circle-fill' :\r\n                                                            actionItem.action === 'cancelled' ? 'bi-x-circle' :\r\n                                                                actionItem.action === 'refund' ? 'bi-arrow-left-circle' :\r\n                                                                    actionItem.action === 'download' ? 'bi-download' :\r\n                                                                        'bi-arrow-right'\r\n                                                    } me-2`}></i>\r\n                                                {actionItem.label}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Refund Modal */}\r\n                {showRefundModal && selectedOrder && (\r\n                    <div\r\n                        className=\"modal d-block\"\r\n                        tabIndex=\"-1\"\r\n                        style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}\r\n                        onClick={handleRefundModalBackdropClick}\r\n                        ref={refundModalRef}\r\n                    >\r\n                        <div className=\"modal-dialog\">\r\n                            <div className=\"modal-content\">\r\n                                <div className=\"modal-header bg-warning text-dark\">\r\n                                    <h5 className=\"modal-title\">\r\n                                        <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n                                        Issue Refund\r\n                                    </h5>\r\n                                    <button type=\"button\" className=\"btn-close\" onClick={closeRefundModal}></button>\r\n                                </div>\r\n                                <div className=\"modal-body\">\r\n                                    <div className=\"alert alert-warning\">\r\n                                        <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n                                        You are about to issue a refund for order {selectedOrder.id} of ${selectedOrder.amount}\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                        <label className=\"form-label\">Refund Reason</label>\r\n                                        <textarea\r\n                                            className=\"form-control\"\r\n                                            rows=\"3\"\r\n                                            placeholder=\"Enter reason for refund...\"\r\n                                            value={refundReason}\r\n                                            onChange={(e) => setRefundReason(e.target.value)}\r\n                                        ></textarea>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"modal-footer\">\r\n                                    <button type=\"button\" className=\"btn btn-secondary\" onClick={closeRefundModal}>Cancel</button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"btn btn-warning\"\r\n                                        onClick={handleRefund}\r\n                                        disabled={!refundReason.trim()}\r\n                                    >\r\n                                        Issue Refund\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ManageOrders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}